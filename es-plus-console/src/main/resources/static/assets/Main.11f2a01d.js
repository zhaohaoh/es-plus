/* empty css               *//* empty css              *//* empty css                *//* empty css               */import{o as h}from"./global.0775014f.js";import{d as M,r as E,c as b,o as B,E as w,a as z,b as L,e as H,f as O,g as y,h as F,w as o,i as t,j as r,k as _,t as k,l as D,m as R,u as N,F as T,n as j,_ as I,p as G,q as K,s as S,v as U,x as q,y as J,z as P,A as Q,B as W,C as X,D as Y}from"./index.6b10c4c5.js";const Z={class:"stats-info"},ee={class:"stats-text"},te={class:"stats-text"},ne={class:"stats-text"},oe={style:{display:"flex","justify-content":"flex-end"}},A=M({__name:"ComponentHead",setup(m){const{proxy:s}=j(),u=E(),a=E([]),x=e=>{localStorage.setItem("currentClient",e)},i=b(()=>a.value.length),l=b(()=>{let e=0;return a.value.forEach(n=>{const p=(n["store.size"]||"0b").match(/^([\d.]+)(\w+)$/i);if(p){const g=parseFloat(p[1]);switch(p[2].toLowerCase()){case"b":e+=g;break;case"kb":e+=g*1024;break;case"mb":e+=g*1024*1024;break;case"gb":e+=g*1024*1024*1024;break;case"tb":e+=g*1024*1024*1024*1024;break}}}),e<1024*1024*1024?(e/(1024*1024)).toFixed(1)+"MB":e<1024*1024*1024*1024?(e/(1024*1024*1024)).toFixed(1)+"GB":(e/(1024*1024*1024*1024)).toFixed(1)+"TB"}),c=b(()=>{if(a.value.length===0)return"0%";let e=0;return a.value.forEach(n=>{n.health&&n.health.toLowerCase()==="green"&&e++}),Math.round(e/a.value.length*100)+"%"});B(()=>{const e=localStorage.getItem("currentClient");if(!e){w.error("\u8BF7\u9009\u62E9\u7D22\u5F15\u94FE\u63A5");return}u.value=e,C(),d()});const d=async()=>{try{const e={keyword:""};let n=await s.$api.esIndex.getIndices(e);n&&(a.value=n)}catch(e){console.log("\u83B7\u53D6\u7D22\u5F15\u6570\u636E\u5931\u8D25:",e)}},C=async()=>{if(!u.value){w.error("\u8BF7\u9009\u62E9\u7D22\u5F15\u94FE\u63A5");return}let e=await s.$api.esClient.esClientList();e&&e.length>0&&(h.value.length=0,e.forEach((n,f)=>{h.value[f]=n}))};return(e,n)=>{const f=z,p=L,g=H,$=O;return y(),F($,{class:"row-bg",gutter:20,align:"middle",style:{"margin-left":"21px","margin-right":"21px"}},{default:o(()=>[t(f,{xs:24,sm:24,md:16,lg:16,xl:16},{default:o(()=>[r("div",Z,[r("span",ee,[n[1]||(n[1]=_("\u5171 ")),r("strong",null,k(i.value),1),n[2]||(n[2]=_(" \u4E2A\u7D22\u5F15"))]),n[5]||(n[5]=r("span",{class:"stats-separator"},"|",-1)),r("span",te,[n[3]||(n[3]=_("\u5B58\u50A8 ")),r("strong",null,k(l.value),1)]),n[6]||(n[6]=r("span",{class:"stats-separator"},"|",-1)),r("span",ne,[n[4]||(n[4]=_("\u5065\u5EB7 ")),r("strong",null,k(c.value),1)])])]),_:1}),t(f,{xs:24,sm:24,md:8,lg:8,xl:8},{default:o(()=>[r("div",oe,[t(g,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=v=>u.value=v),placeholder:"\u9009\u62E9ES",style:{width:"225px"},filterable:"",onChange:x},{default:o(()=>[(y(!0),D(T,null,R(N(h),v=>(y(),F(p,{key:v.id,label:`${v.unikey} (${v.name})`,value:v.unikey,valueKey:v.unikey},null,8,["label","value","valueKey"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1})}}});const se={setup(){const m=G(),s=K();let u=E([]),a=E([]);const x=i=>{s.commit("user/setCurrentMenu",i),m.push(i.path)};return B(()=>{let i=s.state.user.menu;u.value=i.filter(l=>l.type==="MENU"),console.log(u),a.value=i.filter(l=>l.type==="CATALOG"),console.log(a)}),{noChild:u,hasChild:a,openMenu:x}}};function le(m,s,u,a,x,i){const l=S("icon-menu"),c=U,d=q,C=J;return y(),F(C,{"default-active":"2","background-color":"#F2F3F5",class:"el-menu-vertical-demo",collapse:m.isCollapse,onOpen:m.handleOpen,onClose:m.handleClose,router:""},{default:o(()=>[t(d,{index:"/esIndex"},{title:o(()=>s[0]||(s[0]=[_("\u7D22\u5F15\u7BA1\u7406")])),default:o(()=>[t(c,null,{default:o(()=>[t(l)]),_:1})]),_:1}),t(d,{index:"/search"},{title:o(()=>s[1]||(s[1]=[_("\u57FA\u7840\u641C\u7D22")])),default:o(()=>[t(c,null,{default:o(()=>[t(l)]),_:1})]),_:1}),t(d,{index:"/esTable"},{title:o(()=>s[2]||(s[2]=[_("\u9AD8\u7EA7\u641C\u7D22")])),default:o(()=>[t(c,null,{default:o(()=>[t(l)]),_:1})]),_:1}),t(d,{index:"/esAddress"},{title:o(()=>s[3]||(s[3]=[_("\u94FE\u63A5\u7BA1\u7406")])),default:o(()=>[t(c,null,{default:o(()=>[t(l)]),_:1})]),_:1}),t(d,{index:"/login"},{title:o(()=>s[4]||(s[4]=[_("\u91CD\u65B0\u767B\u9646")])),default:o(()=>[t(c,null,{default:o(()=>[t(l)]),_:1})]),_:1})]),_:1},8,["collapse","onOpen","onClose","default-active"])}const V=I(se,[["render",le]]);const ae=M({components:{ComponentMenu:V,ComponentHead:A}}),ue={class:"common-layout"};function re(m,s,u,a,x,i){const l=V,c=P,d=Q,C=A,e=W,n=S("RouterView"),f=X,p=Y;return y(),D("div",ue,[t(p,null,{default:o(()=>[t(c,{width:"200px",class:"menu"},{default:o(()=>[t(l)]),_:1}),t(d,{direction:"vertical",height:"100%"}),t(p,null,{default:o(()=>[t(e,null,{default:o(()=>[t(C)]),_:1}),t(f,null,{default:o(()=>[t(n)]),_:1})]),_:1})]),_:1})])}const fe=I(ae,[["render",re]]);export{fe as default};
