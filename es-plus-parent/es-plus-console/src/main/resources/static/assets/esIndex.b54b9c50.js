/* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css               */import"./javascript.6f3c21e3.js";/* empty css               */import{d as $e,r as o,$ as H,o as Ue,a0 as Te,b as Me,M as Ne,c as Se,a5 as ze,O as Oe,N as Re,E as Je,a as Xe,a1 as je,a2 as Ke,e as b,h as k,P as s,g as u,w as a,n as i,F as O,i as R,a6 as G,a7 as P,u as J,X as c,K as Q,Q as Le,S as g,j as Ye,a4 as He,f as Ge,a3 as Pe,_ as Qe}from"./index.7b9c95b2.js";import{_ as X}from"./index.1be48a9d.js";import{e as j}from"./message.84be4b69.js";import{o as qe}from"./global.75e94739.js";const We={class:"container"},Ze={class:"searchInput"},el={class:"index-item"},ll={style:{"font-size":"28px","font-weight":"bold"}},ul={class:"health-font",style:{"font-size":"18px"}},al={class:"health-font"},tl={class:"index-size"},nl={class:"index-size"},ol={class:"index-size"},sl={class:"editClass"},il={style:{"margin-bottom":"10px"}},dl={class:"dataMoveClient-form"},pl={class:"dataMoveClient-form"},rl=$e({__name:"esIndex",setup(ml){const B=o(),f=o(1),h=o(!1),D=o(!1),T=o(!1),E=o(!1),M=o(!1),N=o("{}"),x=o(""),K=o([]),S=o(1e5),A=o(230),$=o("\u70B9\u51FB\u8FC1\u79FB"),q=[{prop:"id",label:"id"},{prop:"sourceClient",label:"\u6765\u6E90\u6570\u636E\u6E90"},{prop:"targetClient",label:"\u76EE\u6807\u6570\u636E\u6E90"},{prop:"sourceIndex",label:"\u6765\u6E90\u7D22\u5F15"},{prop:"targetIndex",label:"\u76EE\u6807\u7D22\u5F15"},{prop:"taskId",label:"\u4EFB\u52A1id"},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"},{prop:"createUid",label:"\u521B\u5EFA\u4EBAid"},{prop:"completed",label:"\u5B8C\u6210"},{prop:"type",label:"\u4EFB\u52A1\u7C7B\u578B"},{prop:"taskJson",label:"\u4EFB\u52A1\u660E\u7EC6json"}],d=H({indexName:"",number_of_shards:5,number_of_replicas:1,max_result_window:1e4,refresh_interval:"1s",alias:""}),V=o(""),z=o(""),w=o(""),W=async()=>{g.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{Z(r.value),j.success()}).catch(()=>{})},Z=async t=>{const e={indexName:d.indexName,alias:d.alias,esSettings:{...d},mapping:JSON.parse(N.value)};let n=await m.$api.esIndex.createIndex(e);console.log(n),h.value=!1},ee=async()=>{g.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{le(r.value,V.value),j.success()}).catch(()=>{})},le=async(t,e)=>{const n={indexName:t,mappings:e};await m.$api.esIndex.putMapping(n),F.value=!1,U("")},ue=async()=>{f.value===3?oe():f.value===2?ne():f.value===1&&ae()},ae=async()=>{g.confirm("\u786E\u8BA4\u590D\u5236\u7D22\u5F15\u5230 "+B.value+"."+x.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{te()}).catch(()=>{})},te=async()=>{const t={targetClient:B.value,targetIndex:x.value,sourceIndex:r.value};await m.$api.esIndex.copyIndex(t),E.value=!1,x.value=""},ne=async()=>{g.confirm("\u786E\u8BA4\u8FC1\u79FB\u5230 "+x.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{ie()}).catch(()=>{})},oe=async()=>{g.confirm("\u786E\u8BA4\u8FC1\u79FB\u5230 "+B.value+"."+x.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{se()}).catch(()=>{})},se=async()=>{const t={targetClient:B.value,maxSize:S.value,targetIndex:x.value,sourceIndex:r.value};await m.$api.esIndex.indexDataMove(t),E.value=!1,x.value=""},ie=async()=>{const t={targetIndex:x.value,sourceIndex:r.value};await m.$api.esIndex.reindex(t),E.value=!1,x.value=""},de=t=>{V.value=t},I=o("");H({id:null,unikey:"",name:"",address:"http://",username:"",password:"",schema:"http"});let F=o(!1),r=o("");const L=o([]),{proxy:m}=Ye(),pe=async t=>{await _e(t),F.value=!0,r.value=t},re=async t=>{Fe(t),T.value=!0,r.value=t},me=async(t,e)=>{w.value=e,D.value=!0,r.value=t},ve=async(t,e)=>{M.value=!0;const n={sourceIndex:r.value};let v=await m.$api.esIndex.reindexTaskList(n);K.value=v},xe=async(t,e)=>{E.value=!0,r.value=t},ce=async()=>{fe(r.value,w.value)},fe=async(t,e)=>{const n={index:t,alias:e};await m.$api.esIndex.createAlias(n),D.value=!1},ye=async()=>{Be(r.value,w.value)},Be=async(t,e)=>{const n={index:t,alias:e};await m.$api.esIndex.removeAlias(n),D.value=!1},Ee=async()=>{h.value=!0},Fe=async t=>{const e={index:t};let n=await m.$api.esIndex.getIndex(e);z.value=JSON.stringify(n,null,2)},_e=async t=>{const e={indexName:t};let n=await m.$api.esIndex.getMapping(e);V.value=JSON.stringify(n,null,2)};Ue(()=>{U(I.value)});const Ce=()=>{U(I.value)},U=async t=>{const e={keyword:t};let n=await m.$api.esIndex.getIndices(e);L.value=n},be=async t=>{g.confirm("\u4F60\u786E\u5B9A\u5220\u9664\u7D22\u5F15"+t+"\u5417? \u8C28\u614E\u64CD\u4F5C",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{ge(t)}).catch(()=>{})},ge=async t=>{const e={indexName:t};await m.$api.esIndex.deleteIndex(e),j.success(),U(I.value)};return(t,e)=>{const n=Te,v=Me,p=Ne,Y=Se,De=ze,_=Oe,Ve=Re,we=Je,Ie=Xe,ke=Pe,he=He,C=je,Ae=Ke;return b(),k("div",We,[s("div",Ze,[u(Y,null,{default:a(()=>[u(v,{span:22},{default:a(()=>[u(n,{modelValue:I.value,"onUpdate:modelValue":e[0]||(e[0]=l=>I.value=l),placeholder:"\u8BF7\u8F93\u5165\u7D22\u5F15\u540D\u79F0",style:{width:"300px"},onChange:Ce},null,8,["modelValue"])]),_:1}),u(v,{span:2,style:{transform:"translateX(15px)"}},{default:a(()=>[u(p,{type:"primary",onClick:e[1]||(e[1]=l=>Ee()),plain:""},{default:a(()=>e[24]||(e[24]=[i("\u65B0\u5EFA\u7D22\u5F15")])),_:1})]),_:1})]),_:1})]),u(De,{height:"700px"},{default:a(()=>[(b(!0),k(O,null,R(L.value,l=>(b(),k("div",{key:l.index,class:"scrollbar-demo-item"},[s("div",el,[s("span",ll,c(l.index),1),e[25]||(e[25]=s("span",{class:"health-font"},"\u522B\u540D:",-1)),s("span",ul,c(l.alias),1),e[26]||(e[26]=s("span",{class:"health-font"},"\u5065\u5EB7\u72B6\u6001:",-1)),s("span",{class:"health",style:Q({background:l.health})},null,4),s("span",al,c(l.health),1)]),s("span",tl," size: "+c(l["store.size"]),1),s("span",nl," docs: "+c(l["docs.count"])+" delete_docs: "+c(l["docs.deleted"]),1),s("span",ol," shards: "+c(l.pri)+" replice: "+c(l.rep),1),s("div",sl,[u(p,{type:"primary",onClick:y=>pe(l.index),plain:""},{default:a(()=>e[27]||(e[27]=[i("\u8BBE\u7F6E\u6620\u5C04")])),_:2},1032,["onClick"]),u(p,{type:"primary",onClick:y=>re(l.index),plain:""},{default:a(()=>e[28]||(e[28]=[i("\u67E5\u770B\u7D22\u5F15\u4FE1\u606F")])),_:2},1032,["onClick"]),u(p,{type:"primary",onClick:y=>me(l.index,l.alias),plain:""},{default:a(()=>e[29]||(e[29]=[i("\u8BBE\u7F6E\u522B\u540D")])),_:2},1032,["onClick"]),u(p,{type:"primary",plain:"",onClick:y=>xe(l.index,l.alias)},{default:a(()=>e[30]||(e[30]=[i("\u8FC1\u79FB\u7D22\u5F15")])),_:2},1032,["onClick"]),u(p,{type:"danger",onClick:y=>be(l.index),plain:""},{default:a(()=>e[31]||(e[31]=[i("\u5220\u9664")])),_:2},1032,["onClick"])])]))),128))]),_:1}),u(_,{modelValue:D.value,"onUpdate:modelValue":e[3]||(e[3]=l=>D.value=l),title:"\u8BBE\u7F6E\u522B\u540D",style:{width:"600px","max-width":"600px",position:"relative",height:"150px",transform:"translateX(50px)"}},{default:a(()=>[u(n,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=l=>w.value=l)},null,8,["modelValue"]),u(p,{type:"primary",plain:"",onClick:ce,style:{position:"absolute",right:"110px",bottom:"10px"}},{default:a(()=>e[32]||(e[32]=[i("\u8BBE\u7F6E\u522B\u540D ")])),_:1}),u(p,{type:"primary",plain:"",onClick:ye,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[33]||(e[33]=[i("\u5220\u9664\u522B\u540D ")])),_:1})]),_:1},8,["modelValue"]),u(_,{modelValue:E.value,"onUpdate:modelValue":e[10]||(e[10]=l=>E.value=l),title:"\u5F53\u524D\u7D22\u5F15:"+J(r),style:Q({height:`${A.value}px`,width:"600px"})},{default:a(()=>[u(Ve,{style:{"margin-top":"-0px","margin-bottom":"11px"}},{default:a(()=>[u(p,{type:"primary",plain:"",onClick:e[4]||(e[4]=l=>(f.value=1,A.value=230,$.value="\u70B9\u51FB\u590D\u5236"))},{default:a(()=>e[34]||(e[34]=[i("\u7D22\u5F15\u590D\u5236")])),_:1}),u(p,{type:"primary",plain:"",onClick:e[5]||(e[5]=l=>(f.value=2,A.value=200,$.value="\u70B9\u51FB\u8FC1\u79FB"))},{default:a(()=>e[35]||(e[35]=[i("\u540C\u6E90\u8FC1\u79FB")])),_:1}),u(p,{type:"primary",plain:"",onClick:e[6]||(e[6]=l=>(f.value=3,A.value=300,$.value="\u70B9\u51FB\u8FC1\u79FB"))},{default:a(()=>e[36]||(e[36]=[i("\u8DE8\u6570\u636E\u6E90")])),_:1})]),_:1}),G(s("div",il,[s("div",dl,[e[37]||(e[37]=i(" \u76EE\u6807\u6570\u636E\u6E90: ")),u(Ie,{modelValue:B.value,"onUpdate:modelValue":e[7]||(e[7]=l=>B.value=l),class:"m-2",placeholder:"Select",style:{width:"225px"},filterable:""},{default:a(()=>[(b(!0),k(O,null,R(J(qe),l=>(b(),Ge(we,{key:l.id,label:`${l.unikey} (${l.name})`,value:l.unikey,valueKey:l.unikey},null,8,["label","value","valueKey"]))),128))]),_:1},8,["modelValue"])])],512),[[P,f.value==1||f.value==3]]),G(s("div",pl,[e[38]||(e[38]=i(" \u6700\u5927\u8FC1\u79FB\u6570\u91CF: ")),u(n,{placeholder:"\u672C\u6B21\u8FC1\u79FB\u6700\u5927\u9650\u5236\u6570\u91CF",modelValue:S.value,"onUpdate:modelValue":e[8]||(e[8]=l=>S.value=l),style:{display:"inline"}},null,8,["modelValue"])],512),[[P,f.value==3]]),u(n,{placeholder:"\u76EE\u6807\u7D22\u5F15",modelValue:x.value,"onUpdate:modelValue":e[9]||(e[9]=l=>x.value=l)},null,8,["modelValue"]),u(p,{type:"primary",plain:"",onClick:ue,style:{position:"absolute",right:"110px",bottom:"10px"}},{default:a(()=>[i(c($.value),1)]),_:1}),u(p,{type:"primary",plain:"",onClick:ve,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[39]||(e[39]=[i("\u4EFB\u52A1\u660E\u7EC6 ")])),_:1})]),_:1},8,["modelValue","title","style"]),u(_,{modelValue:M.value,"onUpdate:modelValue":e[11]||(e[11]=l=>M.value=l),title:"\u8FC1\u79FB\u4EFB\u52A1\u660E\u7EC6",style:{width:"1500px",position:"relative",height:"600px",transform:"translateX(50px)"}},{default:a(()=>[u(he,{data:K.value,style:{"max-width":"1500px","max-height":"1000px","min-height":"300px"},size:"large"},{default:a(()=>[(b(),k(O,null,R(q,l=>u(ke,{key:l.prop,label:l.label,prop:l.prop,width:"180"},{default:a(y=>[i(c(l.prop==="type"?y.row.type===1?"\u540C\u6E90\u8FC1\u79FB":y.row.type===2?"\u8DE8\u6E90\u8FC1\u79FB":"\u540C\u6E90\u8FC1\u79FB":y.row[l.prop]),1)]),_:2},1032,["label","prop"])),64))]),_:1},8,["data"])]),_:1},8,["modelValue"]),u(_,{modelValue:h.value,"onUpdate:modelValue":e[19]||(e[19]=l=>h.value=l),title:"\u65B0\u5EFA\u7D22\u5F15",style:{width:"1200px","max-width":"1200px",position:"relative",height:"650px",transform:"translateY(-50px)"}},{default:a(()=>[u(Y,null,{default:a(()=>[u(v,{span:8},{default:a(()=>[u(Ae,{inline:!0,model:d,ref:"clientForm","label-width":"100px",style:{"max-width":"660px"},"label-position":"top"},{default:a(()=>[u(C,{label:"\u7D22\u5F15\u540D",prop:"indexName",style:{width:"100%"}},{default:a(()=>[u(v,{span:24},{default:a(()=>[u(n,{modelValue:d.indexName,"onUpdate:modelValue":e[12]||(e[12]=l=>d.indexName=l)},null,8,["modelValue"])]),_:1})]),_:1}),u(C,{label:"\u522B\u540D",prop:"alias",style:{width:"100%"}},{default:a(()=>[u(v,{span:24},{default:a(()=>[u(n,{modelValue:d.alias,"onUpdate:modelValue":e[13]||(e[13]=l=>d.alias=l)},null,8,["modelValue"])]),_:1})]),_:1}),u(C,{label:"\u5206\u7247\u6570",prop:"number_of_shards",style:{width:"100%"}},{default:a(()=>[u(v,{span:24},{default:a(()=>[u(n,{modelValue:d.number_of_shards,"onUpdate:modelValue":e[14]||(e[14]=l=>d.number_of_shards=l)},null,8,["modelValue"])]),_:1})]),_:1}),u(C,{label:"\u526F\u672C\u6570",prop:"number_of_replicas",style:{width:"100%"}},{default:a(()=>[u(v,{span:24},{default:a(()=>[u(n,{modelValue:d.number_of_replicas,"onUpdate:modelValue":e[15]||(e[15]=l=>d.number_of_replicas=l)},null,8,["modelValue"])]),_:1})]),_:1}),u(C,{label:"\u6700\u5927\u67E5\u8BE2\u6570",prop:"max_result_window",style:{width:"100%"}},{default:a(()=>[u(v,{span:24},{default:a(()=>[u(n,{modelValue:d.max_result_window,"onUpdate:modelValue":e[16]||(e[16]=l=>d.max_result_window=l)},null,8,["modelValue"])]),_:1})]),_:1}),u(C,{label:"\u5237\u65B0\u95F4\u9694\u79D2\u6570",prop:"refresh_interval",style:{width:"100%"}},{default:a(()=>[u(v,{span:24},{default:a(()=>[u(n,{modelValue:d.refresh_interval,"onUpdate:modelValue":e[17]||(e[17]=l=>d.refresh_interval=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u(v,{span:16},{default:a(()=>[s("div",null,[u(X,{value:N.value,"onUpdate:value":e[18]||(e[18]=l=>N.value=l),height:"450",styles:"width: 50%",title:"\u8BBE\u7F6E\u6620\u5C04"},null,8,["value"])])]),_:1})]),_:1}),u(p,{type:"primary",plain:"",onClick:W,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[40]||(e[40]=[i(" \u786E\u8BA4\u65B0\u589E\u7D22\u5F15 ")])),_:1})]),_:1},8,["modelValue"]),u(_,{modelValue:J(F),"onUpdate:modelValue":e[21]||(e[21]=l=>Le(F)?F.value=l:F=l),title:"\u8BBE\u7F6E\u6620\u5C04",style:{width:"1000px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:a(()=>[s("div",null,[u(X,{value:V.value,"onUpdate:value":[e[20]||(e[20]=l=>V.value=l),de],height:"600",styles:"width: 50%",title:"\u65B0\u589E\u6620\u5C04\u7ED3\u6784"},null,8,["value"])]),u(p,{type:"primary",plain:"",onClick:ee,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[41]||(e[41]=[i(" \u4FDD\u5B58/\u4FEE\u6539\u6620\u5C04 ")])),_:1})]),_:1},8,["modelValue"]),u(_,{modelValue:T.value,"onUpdate:modelValue":e[23]||(e[23]=l=>T.value=l),title:"\u7D22\u5F15\u4FE1\u606F",style:{width:"900px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:a(()=>[s("div",null,[u(X,{value:z.value,"onUpdate:value":e[22]||(e[22]=l=>z.value=l),height:"600",styles:"width: 100%",title:"\u7D22\u5F15\u4FE1\u606F"},null,8,["value"])])]),_:1},8,["modelValue"])])}}});const gl=Qe(rl,[["__scopeId","data-v-e6134496"]]);export{gl as default};
