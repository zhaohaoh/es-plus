/* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css               */import"./javascript.7db513b7.js";/* empty css               */import{d as Je,r as o,a4 as q,o as Re,Q as Xe,N as je,c as Ye,e as Le,a9 as Ke,P as He,O as Ge,a as Pe,b as Qe,a5 as We,a6 as qe,f as b,i as h,R as d,h as t,w as a,p as s,F as K,j as H,T as Z,U as ee,u as G,a1 as f,L as le,S as Ze,X as B,k as el,a8 as ll,g as tl,a7 as ul,_ as al}from"./index.3900749f.js";import{J as U}from"./index.3bafade1.js";import{e as O}from"./message.198e849d.js";import{o as nl}from"./global.59d43353.js";const ol={class:"container"},sl={class:"searchInput"},il={class:"index-item"},dl={style:{"font-size":"28px","font-weight":"bold"}},pl={class:"health-font",style:{"font-size":"18px"}},rl={class:"health-font"},ml={class:"index-size"},vl={class:"index-size"},xl={class:"index-size"},fl={class:"editClass"},yl={style:{"margin-bottom":"10px"}},cl={class:"dataMoveClient-form"},Fl={class:"dataMoveClient-form"},El=Je({__name:"esIndex",setup(Bl){const g=o(),y=o(1),z=o(!1),$=o(!1),D=o(!1),J=o(!1),C=o(!1),R=o(!1),X=o(!1),j=o("{}"),v=o(""),P=o([]),Y=o(1e5),S=o(230),T=o("\u70B9\u51FB\u8FC1\u79FB"),L=o(""),te=[{prop:"id",label:"id"},{prop:"sourceClient",label:"\u6765\u6E90\u6570\u636E\u6E90"},{prop:"targetClient",label:"\u76EE\u6807\u6570\u636E\u6E90"},{prop:"sourceIndex",label:"\u6765\u6E90\u7D22\u5F15"},{prop:"targetIndex",label:"\u76EE\u6807\u7D22\u5F15"},{prop:"taskId",label:"\u4EFB\u52A1id"},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"},{prop:"createUid",label:"\u521B\u5EFA\u4EBAid"},{prop:"completed",label:"\u5B8C\u6210"},{prop:"type",label:"\u4EFB\u52A1\u7C7B\u578B"},{prop:"taskJson",label:"\u4EFB\u52A1\u660E\u7EC6json"}],p=q({indexName:"",number_of_shards:5,number_of_replicas:1,max_result_window:1e4,refresh_interval:"1s",alias:""}),w=o(""),N=o(""),V=o(""),I=o(""),ue=async()=>{X.value=!0;const u=JSON.parse(N.value).settingsObj;Object.keys(u).forEach(e=>{if(e.startsWith("index.")){const n=e.replace(/^index\./,"");u[n]=u[e],n=="creation_date"&&delete u[n],n=="uuid"&&delete u[n],n=="version.created"&&delete u[n],n=="number_of_shards"&&delete u[n],n=="provided_name"&&delete u[n],n=="routing.allocation.include._tier_preference"&&delete u[n],delete u[e]}u.max_result_window==null&&(u.max_result_window="10000")}),I.value=JSON.stringify(u,null,2),console.log("aaa"+JSON.stringify(I.value))},ae=async()=>{B.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{ne(r.value),O.success()}).catch(()=>{})},ne=async u=>{const e={indexName:p.indexName,alias:p.alias,esSettings:{...p},mapping:JSON.parse(j.value)};let n=await m.$api.esIndex.createIndex(e);console.log(n),$.value=!1},oe=async()=>{B.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{se(r.value,w.value),O.success()}).catch(()=>{})},se=async(u,e)=>{const n={indexName:u,mappings:e};await m.$api.esIndex.putMapping(n),E.value=!1,A()},ie=async()=>{B.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{de(r.value,I.value),O.success()}).catch(()=>{})},de=async(u,e)=>{const n={indexName:u,settings:e};await m.$api.esIndex.updateSettings(n),E.value=!1,M("")},pe=async()=>{y.value===3?xe():y.value===2?ve():y.value===1&&re()},re=async()=>{B.confirm("\u786E\u8BA4\u590D\u5236\u7D22\u5F15\u5230 "+g.value+"."+v.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{me()}).catch(()=>{})},me=async()=>{const u={targetClient:g.value,targetIndex:v.value,sourceIndex:r.value};await m.$api.esIndex.copyIndex(u),C.value=!1,v.value=""},ve=async()=>{B.confirm("\u786E\u8BA4\u8FC1\u79FB\u5230 "+v.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{ye()}).catch(()=>{})},xe=async()=>{B.confirm("\u786E\u8BA4\u8FC1\u79FB\u5230 "+g.value+"."+v.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{fe()}).catch(()=>{})},fe=async()=>{const u={targetClient:g.value,maxSize:Y.value,targetIndex:v.value,sourceIndex:r.value};await m.$api.esIndex.indexDataMove(u),C.value=!1,v.value=""},ye=async()=>{const u={targetIndex:v.value,sourceIndex:r.value};await m.$api.esIndex.reindex(u),C.value=!1,v.value=""},ce=u=>{w.value=u},k=o("");q({id:null,unikey:"",name:"",address:"http://",username:"",password:"",schema:"http"});let E=o(!1),r=o("");const Q=o([]),{proxy:m}=el(),Fe=async u=>{await Ae(u),E.value=!0,r.value=u},Ee=async u=>{ke(u),J.value=!0,r.value=u},Be=async(u,e)=>{V.value=e,D.value=!0,r.value=u},ge=async(u,e)=>{R.value=!0;const n={sourceIndex:r.value};let i=await m.$api.esIndex.reindexTaskList(n);P.value=i},Ce=async(u,e)=>{C.value=!0,r.value=u},_e=async()=>{be(r.value,V.value)},be=async(u,e)=>{const n={index:u,alias:e};await m.$api.esIndex.createAlias(n),D.value=!1,A()},De=async()=>{we(r.value,V.value)},we=async(u,e)=>{const n={index:u,alias:e};await m.$api.esIndex.removeAlias(n),D.value=!1,A()},Ve=async()=>{$.value=!0},Ie=async()=>{let u=await m.$api.esIndex.getIndexStat();L.value=JSON.stringify(u,null,2),console.log(u),z.value=!0},ke=async u=>{const e={index:u};let n=await m.$api.esIndex.getIndex(e);N.value=JSON.stringify(n,null,2)},Ae=async u=>{const e={indexName:u};let n=await m.$api.esIndex.getMapping(e);w.value=JSON.stringify(n,null,2)};Re(()=>{M(k.value)});const A=()=>{M(k.value)},M=async u=>{const e={keyword:u};let n=await m.$api.esIndex.getIndices(e);Q.value=n},he=async u=>{B.confirm("\u4F60\u786E\u5B9A\u5220\u9664\u7D22\u5F15"+u+"\u5417? \u8C28\u614E\u64CD\u4F5C",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{Ue(u)}).catch(()=>{})},Ue=async u=>{const e={indexName:u};await m.$api.esIndex.deleteIndex(e),O.success(),M(k.value)};return(u,e)=>{const n=Xe,i=je,x=Ye,W=Le,$e=Ke,c=He,Se=Ge,Te=Pe,Ne=Qe,Me=ul,Oe=ll,_=We,ze=qe;return b(),h("div",ol,[d("div",sl,[t(W,null,{default:a(()=>[t(x,{span:20},{default:a(()=>[t(n,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),placeholder:"\u8BF7\u8F93\u5165\u7D22\u5F15\u540D\u79F0",style:{width:"300px"},onChange:A},null,8,["modelValue"]),t(i,{type:"primary",onClick:e[1]||(e[1]=l=>A()),plain:"",style:{transform:"translateX(10px)"}},{default:a(()=>e[30]||(e[30]=[s("\u67E5\u8BE2")])),_:1})]),_:1}),t(x,{span:2,style:{transform:"translateX(30px)"}},{default:a(()=>[t(i,{type:"primary",onClick:e[2]||(e[2]=l=>Ie()),plain:""},{default:a(()=>e[31]||(e[31]=[s("\u96C6\u7FA4\u4FE1\u606F")])),_:1})]),_:1}),t(x,{span:2,style:{transform:"translateX(15px)"}},{default:a(()=>[t(i,{type:"primary",onClick:e[3]||(e[3]=l=>Ve()),plain:""},{default:a(()=>e[32]||(e[32]=[s("\u65B0\u5EFA\u7D22\u5F15")])),_:1})]),_:1})]),_:1})]),t($e,{height:"700px"},{default:a(()=>[(b(!0),h(K,null,H(Q.value,l=>(b(),h("div",{key:l.index,class:"scrollbar-demo-item"},[d("div",il,[d("span",dl,f(l.index),1),e[33]||(e[33]=d("span",{class:"health-font"},"\u522B\u540D:",-1)),d("span",pl,f(l.alias),1),e[34]||(e[34]=d("span",{class:"health-font"},"\u5065\u5EB7\u72B6\u6001:",-1)),d("span",{class:"health",style:le({background:l.health})},null,4),d("span",rl,f(l.health),1)]),d("span",ml," size: "+f(l["store.size"]),1),d("span",vl," docs: "+f(l["docs.count"])+" delete_docs: "+f(l["docs.deleted"]),1),d("span",xl," shards: "+f(l.pri)+" replice: "+f(l.rep),1),d("div",fl,[t(i,{type:"primary",onClick:F=>Fe(l.index),plain:""},{default:a(()=>e[35]||(e[35]=[s("\u8BBE\u7F6E\u6620\u5C04")])),_:2},1032,["onClick"]),t(i,{type:"primary",onClick:F=>Ee(l.index),plain:""},{default:a(()=>e[36]||(e[36]=[s("\u67E5\u770B\u7D22\u5F15\u4FE1\u606F")])),_:2},1032,["onClick"]),t(i,{type:"primary",onClick:F=>Be(l.index,l.alias),plain:""},{default:a(()=>e[37]||(e[37]=[s("\u8BBE\u7F6E\u522B\u540D")])),_:2},1032,["onClick"]),t(i,{type:"primary",plain:"",onClick:F=>Ce(l.index,l.alias)},{default:a(()=>e[38]||(e[38]=[s("\u8FC1\u79FB\u7D22\u5F15")])),_:2},1032,["onClick"]),t(i,{type:"danger",onClick:F=>he(l.index),plain:""},{default:a(()=>e[39]||(e[39]=[s("\u5220\u9664")])),_:2},1032,["onClick"])])]))),128))]),_:1}),t(c,{modelValue:D.value,"onUpdate:modelValue":e[5]||(e[5]=l=>D.value=l),title:"\u8BBE\u7F6E\u522B\u540D",style:{width:"600px","max-width":"600px",position:"relative",height:"150px",transform:"translateX(50px)"}},{default:a(()=>[t(n,{modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=l=>V.value=l)},null,8,["modelValue"]),t(i,{type:"primary",plain:"",onClick:_e,style:{position:"absolute",right:"110px",bottom:"10px"}},{default:a(()=>e[40]||(e[40]=[s("\u8BBE\u7F6E\u522B\u540D ")])),_:1}),t(i,{type:"primary",plain:"",onClick:De,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[41]||(e[41]=[s("\u5220\u9664\u522B\u540D ")])),_:1})]),_:1},8,["modelValue"]),t(c,{modelValue:C.value,"onUpdate:modelValue":e[12]||(e[12]=l=>C.value=l),title:"\u5F53\u524D\u7D22\u5F15:"+G(r),style:le({height:`${S.value}px`,width:"600px"})},{default:a(()=>[t(Se,{style:{"margin-top":"-0px","margin-bottom":"11px"}},{default:a(()=>[t(i,{type:"primary",plain:"",onClick:e[6]||(e[6]=l=>(y.value=1,S.value=230,T.value="\u70B9\u51FB\u590D\u5236"))},{default:a(()=>e[42]||(e[42]=[s("\u7D22\u5F15\u590D\u5236")])),_:1}),t(i,{type:"primary",plain:"",onClick:e[7]||(e[7]=l=>(y.value=2,S.value=200,T.value="\u70B9\u51FB\u8FC1\u79FB"))},{default:a(()=>e[43]||(e[43]=[s("\u540C\u6E90\u8FC1\u79FB")])),_:1}),t(i,{type:"primary",plain:"",onClick:e[8]||(e[8]=l=>(y.value=3,S.value=300,T.value="\u70B9\u51FB\u8FC1\u79FB"))},{default:a(()=>e[44]||(e[44]=[s("\u8DE8\u6570\u636E\u6E90")])),_:1})]),_:1}),Z(d("div",yl,[d("div",cl,[e[45]||(e[45]=s(" \u76EE\u6807\u6570\u636E\u6E90: ")),t(Ne,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=l=>g.value=l),class:"m-2",placeholder:"Select",style:{width:"225px"},filterable:""},{default:a(()=>[(b(!0),h(K,null,H(G(nl),l=>(b(),tl(Te,{key:l.id,label:`${l.unikey} (${l.name})`,value:l.unikey,valueKey:l.unikey},null,8,["label","value","valueKey"]))),128))]),_:1},8,["modelValue"])])],512),[[ee,y.value==1||y.value==3]]),Z(d("div",Fl,[e[46]||(e[46]=s(" \u6700\u5927\u8FC1\u79FB\u6570\u91CF: ")),t(n,{placeholder:"\u672C\u6B21\u8FC1\u79FB\u6700\u5927\u9650\u5236\u6570\u91CF",modelValue:Y.value,"onUpdate:modelValue":e[10]||(e[10]=l=>Y.value=l),style:{display:"inline"}},null,8,["modelValue"])],512),[[ee,y.value==3]]),t(n,{placeholder:"\u76EE\u6807\u7D22\u5F15",modelValue:v.value,"onUpdate:modelValue":e[11]||(e[11]=l=>v.value=l)},null,8,["modelValue"]),t(i,{type:"primary",plain:"",onClick:pe,style:{position:"absolute",right:"110px",bottom:"10px"}},{default:a(()=>[s(f(T.value),1)]),_:1}),t(i,{type:"primary",plain:"",onClick:ge,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[47]||(e[47]=[s("\u4EFB\u52A1\u660E\u7EC6 ")])),_:1})]),_:1},8,["modelValue","title","style"]),t(c,{modelValue:R.value,"onUpdate:modelValue":e[13]||(e[13]=l=>R.value=l),title:"\u8FC1\u79FB\u4EFB\u52A1\u660E\u7EC6",style:{width:"1500px",position:"relative",height:"600px",transform:"translateX(50px)"}},{default:a(()=>[t(Oe,{data:P.value,style:{"max-width":"1500px","max-height":"1000px","min-height":"300px"},size:"large"},{default:a(()=>[(b(),h(K,null,H(te,l=>t(Me,{key:l.prop,label:l.label,prop:l.prop,width:"180"},{default:a(F=>[s(f(l.prop==="type"?F.row.type===1?"\u540C\u6E90\u8FC1\u79FB":F.row.type===2?"\u8DE8\u6E90\u8FC1\u79FB":"\u540C\u6E90\u8FC1\u79FB":F.row[l.prop]),1)]),_:2},1032,["label","prop"])),64))]),_:1},8,["data"])]),_:1},8,["modelValue"]),t(c,{modelValue:$.value,"onUpdate:modelValue":e[21]||(e[21]=l=>$.value=l),title:"\u65B0\u5EFA\u7D22\u5F15",style:{width:"1200px","max-width":"1200px",position:"relative",height:"650px",transform:"translateY(-50px)"}},{default:a(()=>[t(W,null,{default:a(()=>[t(x,{span:8},{default:a(()=>[t(ze,{inline:!0,model:p,ref:"clientForm","label-width":"100px",style:{"max-width":"660px"},"label-position":"top"},{default:a(()=>[t(_,{label:"\u7D22\u5F15\u540D",prop:"indexName",style:{width:"100%"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[t(n,{modelValue:p.indexName,"onUpdate:modelValue":e[14]||(e[14]=l=>p.indexName=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{label:"\u522B\u540D",prop:"alias",style:{width:"100%"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[t(n,{modelValue:p.alias,"onUpdate:modelValue":e[15]||(e[15]=l=>p.alias=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{label:"\u5206\u7247\u6570",prop:"number_of_shards",style:{width:"100%"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[t(n,{modelValue:p.number_of_shards,"onUpdate:modelValue":e[16]||(e[16]=l=>p.number_of_shards=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{label:"\u526F\u672C\u6570",prop:"number_of_replicas",style:{width:"100%"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[t(n,{modelValue:p.number_of_replicas,"onUpdate:modelValue":e[17]||(e[17]=l=>p.number_of_replicas=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{label:"\u6700\u5927\u67E5\u8BE2\u6570",prop:"max_result_window",style:{width:"100%"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[t(n,{modelValue:p.max_result_window,"onUpdate:modelValue":e[18]||(e[18]=l=>p.max_result_window=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{label:"\u5237\u65B0\u95F4\u9694\u79D2\u6570",prop:"refresh_interval",style:{width:"100%"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[t(n,{modelValue:p.refresh_interval,"onUpdate:modelValue":e[19]||(e[19]=l=>p.refresh_interval=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(x,{span:16},{default:a(()=>[d("div",null,[t(U,{value:j.value,"onUpdate:value":e[20]||(e[20]=l=>j.value=l),height:"450",styles:"width: 50%",title:"\u8BBE\u7F6E\u6620\u5C04"},null,8,["value"])])]),_:1})]),_:1}),t(i,{type:"primary",plain:"",onClick:ae,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[48]||(e[48]=[s(" \u786E\u8BA4\u65B0\u589E\u7D22\u5F15 ")])),_:1})]),_:1},8,["modelValue"]),t(c,{modelValue:G(E),"onUpdate:modelValue":e[23]||(e[23]=l=>Ze(E)?E.value=l:E=l),title:"\u8BBE\u7F6E\u6620\u5C04",style:{width:"1000px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:a(()=>[d("div",null,[t(U,{value:w.value,"onUpdate:value":[e[22]||(e[22]=l=>w.value=l),ce],height:"600",styles:"width: 50%",title:"\u65B0\u589E\u6620\u5C04\u7ED3\u6784"},null,8,["value"])]),t(i,{type:"primary",plain:"",onClick:oe,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[49]||(e[49]=[s(" \u4FDD\u5B58/\u4FEE\u6539\u6620\u5C04 ")])),_:1})]),_:1},8,["modelValue"]),t(c,{modelValue:J.value,"onUpdate:modelValue":e[25]||(e[25]=l=>J.value=l),title:"\u7D22\u5F15\u4FE1\u606F",style:{width:"900px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:a(()=>[d("div",null,[t(U,{value:N.value,"onUpdate:value":e[24]||(e[24]=l=>N.value=l),height:"600",styles:"width: 100%",title:"\u7D22\u5F15\u4FE1\u606F"},null,8,["value"])]),t(i,{type:"primary",plain:"",onClick:ue,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[50]||(e[50]=[s(" \u7D22\u5F15\u914D\u7F6E\u7F16\u8F91 ")])),_:1})]),_:1},8,["modelValue"]),t(c,{modelValue:X.value,"onUpdate:modelValue":e[27]||(e[27]=l=>X.value=l),title:"\u7D22\u5F15\u53EF\u4FEE\u6539\u914D\u7F6E",style:{width:"900px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:a(()=>[d("div",null,[t(U,{value:I.value,"onUpdate:value":e[26]||(e[26]=l=>I.value=l),height:"600",styles:"width: 100%",title:"\u7D22\u5F15\u914D\u7F6E\u4FE1\u606F"},null,8,["value"])]),t(i,{type:"primary",plain:"",onClick:ie,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:a(()=>e[51]||(e[51]=[s(" \u4FDD\u5B58 ")])),_:1})]),_:1},8,["modelValue"]),t(c,{modelValue:z.value,"onUpdate:modelValue":e[29]||(e[29]=l=>z.value=l),title:"\u96C6\u7FA4\u4FE1\u606F",style:{width:"900px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:a(()=>[d("div",null,[t(U,{value:L.value,"onUpdate:value":e[28]||(e[28]=l=>L.value=l),height:"600",styles:"width: 100%",title:"\u96C6\u7FA4\u4FE1\u606F"},null,8,["value"])])]),_:1},8,["modelValue"])])}}});const Ul=al(El,[["__scopeId","data-v-476983a9"]]);export{Ul as default};
