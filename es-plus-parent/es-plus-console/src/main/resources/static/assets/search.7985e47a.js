/* empty css             *//* empty css               */import{r as ae}from"./javascript.80fac128.js";import{d as ue,r as q,o as me,A as ie,B as ke,u as J,C as rt,D as Se,G as it,e as le,h as ge,f as lt,H as at,I as ot,J as We,K as st,j as Ge,L as ft,M as ut,N as gt,O as ht,P as x,g as Y,w as ne,n as re,Q as Ue,R as ze,S as ct,_ as dt}from"./index.483d1c98.js";var vt={exports:{}};(function(O,_){(function(b){b(ae())})(function(b){function T(r,i,a,l){if(a&&a.call){var f=a;a=null}else var f=n(r,a,"rangeFinder");typeof i=="number"&&(i=b.Pos(i,0));var s=n(r,a,"minFoldSize");function g(w){var S=f(r,i);if(!S||S.to.line-S.from.line<s)return null;if(l==="fold")return S;for(var D=r.findMarksAt(S.from),M=0;M<D.length;++M)if(D[M].__isFold){if(!w)return null;S.cleared=!0,D[M].clear()}return S}var h=g(!0);if(n(r,a,"scanUp"))for(;!h&&i.line>r.firstLine();)i=b.Pos(i.line-1,0),h=g(!1);if(!(!h||h.cleared||l==="unfold")){var p=y(r,a,h);b.on(p,"mousedown",function(w){c.clear(),b.e_preventDefault(w)});var c=r.markText(h.from,h.to,{replacedWith:p,clearOnEnter:n(r,a,"clearOnEnter"),__isFold:!0});c.on("clear",function(w,S){b.signal(r,"unfold",r,w,S)}),b.signal(r,"fold",r,h.from,h.to)}}function y(r,i,a){var l=n(r,i,"widget");if(typeof l=="function"&&(l=l(a.from,a.to)),typeof l=="string"){var f=document.createTextNode(l);l=document.createElement("span"),l.appendChild(f),l.className="CodeMirror-foldmarker"}else l&&(l=l.cloneNode(!0));return l}b.newFoldFunction=function(r,i){return function(a,l){T(a,l,{rangeFinder:r,widget:i})}},b.defineExtension("foldCode",function(r,i,a){T(this,r,i,a)}),b.defineExtension("isFolded",function(r){for(var i=this.findMarksAt(r),a=0;a<i.length;++a)if(i[a].__isFold)return!0}),b.commands.toggleFold=function(r){r.foldCode(r.getCursor())},b.commands.fold=function(r){r.foldCode(r.getCursor(),null,"fold")},b.commands.unfold=function(r){r.foldCode(r.getCursor(),{scanUp:!1},"unfold")},b.commands.foldAll=function(r){r.operation(function(){for(var i=r.firstLine(),a=r.lastLine();i<=a;i++)r.foldCode(b.Pos(i,0),{scanUp:!1},"fold")})},b.commands.unfoldAll=function(r){r.operation(function(){for(var i=r.firstLine(),a=r.lastLine();i<=a;i++)r.foldCode(b.Pos(i,0),{scanUp:!1},"unfold")})},b.registerHelper("fold","combine",function(){var r=Array.prototype.slice.call(arguments,0);return function(i,a){for(var l=0;l<r.length;++l){var f=r[l](i,a);if(f)return f}}}),b.registerHelper("fold","auto",function(r,i){for(var a=r.getHelpers(i,"fold"),l=0;l<a.length;l++){var f=a[l](r,i);if(f)return f}});var e={rangeFinder:b.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};b.defineOption("foldOptions",null);function n(r,i,a){if(i&&i[a]!==void 0)return i[a];var l=r.options.foldOptions;return l&&l[a]!==void 0?l[a]:e[a]}b.defineExtension("foldOption",function(r,i){return n(this,r,i)})})})();(function(O,_){(function(b){b(ae(),vt.exports)})(function(b){b.defineOption("foldGutter",!1,function(c,w,S){S&&S!=b.Init&&(c.clearGutter(c.state.foldGutter.options.gutter),c.state.foldGutter=null,c.off("gutterClick",f),c.off("changes",g),c.off("viewportChange",h),c.off("fold",p),c.off("unfold",p),c.off("swapDoc",g),c.off("optionChange",s)),w&&(c.state.foldGutter=new y(e(w)),l(c),c.on("gutterClick",f),c.on("changes",g),c.on("viewportChange",h),c.on("fold",p),c.on("unfold",p),c.on("swapDoc",g),c.on("optionChange",s))});var T=b.Pos;function y(c){this.options=c,this.from=this.to=0}function e(c){return c===!0&&(c={}),c.gutter==null&&(c.gutter="CodeMirror-foldgutter"),c.indicatorOpen==null&&(c.indicatorOpen="CodeMirror-foldgutter-open"),c.indicatorFolded==null&&(c.indicatorFolded="CodeMirror-foldgutter-folded"),c}function n(c,w){for(var S=c.findMarks(T(w,0),T(w+1,0)),D=0;D<S.length;++D)if(S[D].__isFold){var M=S[D].find(-1);if(M&&M.line===w)return S[D]}}function r(c){if(typeof c=="string"){var w=document.createElement("div");return w.className=c+" CodeMirror-guttermarker-subtle",w}else return c.cloneNode(!0)}function i(c,w,S){var D=c.state.foldGutter.options,M=w-1,L=c.foldOption(D,"minFoldSize"),N=c.foldOption(D,"rangeFinder"),F=typeof D.indicatorFolded=="string"&&a(D.indicatorFolded),E=typeof D.indicatorOpen=="string"&&a(D.indicatorOpen);c.eachLine(w,S,function(I){++M;var R=null,B=I.gutterMarkers;if(B&&(B=B[D.gutter]),n(c,M)){if(F&&B&&F.test(B.className))return;R=r(D.indicatorFolded)}else{var P=T(M,0),z=N&&N(c,P);if(z&&z.to.line-z.from.line>=L){if(E&&B&&E.test(B.className))return;R=r(D.indicatorOpen)}}!R&&!B||c.setGutterMarker(I,D.gutter,R)})}function a(c){return new RegExp("(^|\\s)"+c+"(?:$|\\s)\\s*")}function l(c){var w=c.getViewport(),S=c.state.foldGutter;!S||(c.operation(function(){i(c,w.from,w.to)}),S.from=w.from,S.to=w.to)}function f(c,w,S){var D=c.state.foldGutter;if(!!D){var M=D.options;if(S==M.gutter){var L=n(c,w);L?L.clear():c.foldCode(T(w,0),M)}}}function s(c,w){w=="mode"&&g(c)}function g(c){var w=c.state.foldGutter;if(!!w){var S=w.options;w.from=w.to=0,clearTimeout(w.changeUpdate),w.changeUpdate=setTimeout(function(){l(c)},S.foldOnChangeTimeSpan||600)}}function h(c){var w=c.state.foldGutter;if(!!w){var S=w.options;clearTimeout(w.changeUpdate),w.changeUpdate=setTimeout(function(){var D=c.getViewport();w.from==w.to||D.from-w.to>20||w.from-D.to>20?l(c):c.operation(function(){D.from<w.from&&(i(c,D.from,w.from),w.from=D.from),D.to>w.to&&(i(c,w.to,D.to),w.to=D.to)})},S.updateViewportTimeSpan||400)}}function p(c,w){var S=c.state.foldGutter;if(!!S){var D=w.line;D>=S.from&&D<S.to&&i(c,D,D+1)}}})})();(function(O,_){(function(b){b(ae())})(function(b){function T(y){return function(e,n){var r=n.line,i=e.getLine(r);function a(p){for(var c,w=n.ch,S=0;;){var D=w<=0?-1:i.lastIndexOf(p[0],w-1);if(D==-1){if(S==1)break;S=1,w=i.length;continue}if(S==1&&D<n.ch)break;if(c=e.getTokenTypeAt(b.Pos(r,D+1)),!/^(comment|string)/.test(c))return{ch:D+1,tokenType:c,pair:p};w=D-1}}function l(p){var c=1,w=e.lastLine(),S,D=p.ch,M;e:for(var L=r;L<=w;++L)for(var N=e.getLine(L),F=L==r?D:0;;){var E=N.indexOf(p.pair[0],F),I=N.indexOf(p.pair[1],F);if(E<0&&(E=N.length),I<0&&(I=N.length),F=Math.min(E,I),F==N.length)break;if(e.getTokenTypeAt(b.Pos(L,F+1))==p.tokenType){if(F==E)++c;else if(!--c){S=L,M=F;break e}}++F}return S==null||r==S?null:{from:b.Pos(r,D),to:b.Pos(S,M)}}for(var f=[],s=0;s<y.length;s++){var g=a(y[s]);g&&f.push(g)}f.sort(function(p,c){return p.ch-c.ch});for(var s=0;s<f.length;s++){var h=l(f[s]);if(h)return h}return null}}b.registerHelper("fold","brace",T([["{","}"],["[","]"]])),b.registerHelper("fold","brace-paren",T([["{","}"],["[","]"],["(",")"]])),b.registerHelper("fold","import",function(y,e){function n(s){if(s<y.firstLine()||s>y.lastLine())return null;var g=y.getTokenAt(b.Pos(s,1));if(/\S/.test(g.string)||(g=y.getTokenAt(b.Pos(s,g.end+1))),g.type!="keyword"||g.string!="import")return null;for(var h=s,p=Math.min(y.lastLine(),s+10);h<=p;++h){var c=y.getLine(h),w=c.indexOf(";");if(w!=-1)return{startCh:g.end,end:b.Pos(h,w)}}}var r=e.line,i=n(r),a;if(!i||n(r-1)||(a=n(r-2))&&a.end.line==r-1)return null;for(var l=i.end;;){var f=n(l.line+1);if(f==null)break;l=f.end}return{from:y.clipPos(b.Pos(r,i.startCh+1)),to:l}}),b.registerHelper("fold","include",function(y,e){function n(f){if(f<y.firstLine()||f>y.lastLine())return null;var s=y.getTokenAt(b.Pos(f,1));if(/\S/.test(s.string)||(s=y.getTokenAt(b.Pos(f,s.end+1))),s.type=="meta"&&s.string.slice(0,8)=="#include")return s.start+8}var r=e.line,i=n(r);if(i==null||n(r-1)!=null)return null;for(var a=r;;){var l=n(a+1);if(l==null)break;++a}return{from:b.Pos(r,i+1),to:y.clipPos(b.Pos(a))}})})})();var $e=ae();(function(O,_){(function(b){b(ae())})(function(b){var T=b.Pos,y="http://www.w3.org/2000/svg";function e(t,o){this.mv=t,this.type=o,this.classes=o=="left"?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}e.prototype={constructor:e,init:function(t,o,u){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=b(t,be({value:o,readOnly:!this.mv.options.allowEditingOriginals},be(u))),this.mv.options.connect=="align"&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new _e(this.edit)),this.orig.state.trackAlignable=new _e(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.lockButton.setAttribute("aria-label",this.lockButton.title),this.orig.state.diffViews=[this];var d=u.chunkClassLocation||"background";Object.prototype.toString.call(d)!="[object Array]"&&(d=[d]),this.classes.classLocation=d,this.diff=Ee(G(o),G(u.value),this.mv.options.ignoreWhitespace),this.chunks=Te(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=u.showDifferences!==!1},registerEvents:function(t){this.forceUpdate=i(this),s(this,!0,!1),a(this,t)},setShowDifferences:function(t){t=t!==!1,t!=this.showDifferences&&(this.showDifferences=t,this.forceUpdate("full"))}};function n(t){t.diffOutOfDate&&(t.diff=Ee(t.orig.getValue(),t.edit.getValue(),t.mv.options.ignoreWhitespace),t.chunks=Te(t.diff),t.diffOutOfDate=!1,b.signal(t.edit,"updateDiff",t.diff))}var r=!1;function i(t){var o={from:0,to:0,marked:[]},u={from:0,to:0,marked:[]},d,v=!1;function m(U){r=!0,v=!1,U=="full"&&(t.svg&&ce(t.svg),t.copyButtons&&ce(t.copyButtons),h(t.edit,o.marked,t.classes),h(t.orig,u.marked,t.classes),o.from=o.to=u.from=u.to=0),n(t),t.showDifferences&&(p(t.edit,t.diff,o,DIFF_INSERT,t.classes),p(t.orig,t.diff,u,DIFF_DELETE,t.classes)),t.mv.options.connect=="align"&&F(t),S(t),t.needsScrollSync!=null&&l(t,t.needsScrollSync),r=!1}function k(U){r||(t.dealigned=!0,A(U))}function A(U){r||v||(clearTimeout(d),U===!0&&(v=!0),d=setTimeout(m,U===!0?20:250))}function C(U,H){t.diffOutOfDate||(t.diffOutOfDate=!0,o.from=o.to=u.from=u.to=0),k(H.text.length-1!=H.to.line-H.from.line)}function V(){t.diffOutOfDate=!0,t.dealigned=!0,m("full")}return t.edit.on("change",C),t.orig.on("change",C),t.edit.on("swapDoc",V),t.orig.on("swapDoc",V),t.mv.options.connect=="align"&&(b.on(t.edit.state.trackAlignable,"realign",k),b.on(t.orig.state.trackAlignable,"realign",k)),t.edit.on("viewportChange",function(){A(!1)}),t.orig.on("viewportChange",function(){A(!1)}),m(),m}function a(t,o){t.edit.on("scroll",function(){l(t,!0)&&S(t)}),t.orig.on("scroll",function(){l(t,!1)&&S(t),o&&l(o,!0)&&S(o)})}function l(t,o){if(t.diffOutOfDate)return t.lockScroll&&t.needsScrollSync==null&&(t.needsScrollSync=o),!1;if(t.needsScrollSync=null,!t.lockScroll)return!0;var u,d,v=+new Date;if(o?(u=t.edit,d=t.orig):(u=t.orig,d=t.edit),u.state.scrollSetBy==t&&(u.state.scrollSetAt||0)+250>v)return!1;var m=u.getScrollInfo();if(t.mv.options.connect=="align")j=m.top;else{var k=.5*m.clientHeight,A=m.top+k,C=u.lineAtHeight(A,"local"),V=qe(t.chunks,C,o),U=f(u,o?V.edit:V.orig),H=f(d,o?V.orig:V.edit),W=(A-U.top)/(U.bot-U.top),j=H.top-k+W*(H.bot-H.top),$,Z;if(j>m.top&&(Z=m.top/k)<1)j=j*Z+m.top*(1-Z);else if(($=m.height-m.clientHeight-m.top)<k){var X=d.getScrollInfo(),Q=X.height-X.clientHeight-j;Q>$&&(Z=$/k)<1&&(j=j*Z+(X.height-X.clientHeight-$)*(1-Z))}}return d.scrollTo(m.left,j),d.state.scrollSetAt=v,d.state.scrollSetBy=t,!0}function f(t,o){var u=o.after;return u==null&&(u=t.lastLine()+1),{top:t.heightAtLine(o.before||0,"local"),bot:t.heightAtLine(u,"local")}}function s(t,o,u){t.lockScroll=o,o&&u!=!1&&l(t,DIFF_INSERT)&&S(t),(o?b.addClass:b.rmClass)(t.lockButton,"CodeMirror-merge-scrolllock-enabled")}function g(t,o,u){for(var d=u.classLocation,v=0;v<d.length;v++)t.removeLineClass(o,d[v],u.chunk),t.removeLineClass(o,d[v],u.start),t.removeLineClass(o,d[v],u.end)}function h(t,o,u){for(var d=0;d<o.length;++d){var v=o[d];v instanceof b.TextMarker?v.clear():v.parent&&g(t,v,u)}o.length=0}function p(t,o,u,d,v){var m=t.getViewport();t.operation(function(){u.from==u.to||m.from-u.to>20||u.from-m.to>20?(h(t,u.marked,v),w(t,o,d,u.marked,m.from,m.to,v),u.from=m.from,u.to=m.to):(m.from<u.from&&(w(t,o,d,u.marked,m.from,u.from,v),u.from=m.from),m.to>u.to&&(w(t,o,d,u.marked,u.to,m.to,v),u.to=m.to))})}function c(t,o,u,d,v,m){for(var k=u.classLocation,A=t.getLineHandle(o),C=0;C<k.length;C++)d&&t.addLineClass(A,k[C],u.chunk),v&&t.addLineClass(A,k[C],u.start),m&&t.addLineClass(A,k[C],u.end);return A}function w(t,o,u,d,v,m,k){var A=T(0,0),C=T(v,0),V=t.clipPos(T(m-1)),U=u==DIFF_DELETE?k.del:k.insert;function H(we,oe){for(var se=Math.max(v,we),Ve=Math.min(m,oe),fe=se;fe<Ve;++fe)d.push(c(t,fe,k,!0,fe==we,fe==oe-1));we==oe&&se==oe&&Ve==oe&&(se?d.push(c(t,se-1,k,!1,!1,!0)):d.push(c(t,se,k,!1,!0,!1)))}for(var W=0,j=!1,$=0;$<o.length;++$){var Z=o[$],X=Z[0],Q=Z[1];if(X==DIFF_EQUAL){var Le=A.line+(Ce(o,$)?0:1);de(A,Q);var Be=A.line+(Ae(o,$)?1:0);Be>Le&&(j&&(H(W,Le),j=!1),W=Be)}else if(j=!0,X==u){var Ne=de(A,Q,!0),Pe=xe(C,A),Re=Ye(V,Ne);et(Pe,Re)||d.push(t.markText(Pe,Re,{className:U})),A=Ne}}j&&H(W,A.line+1)}function S(t){if(!!t.showDifferences){if(t.svg){ce(t.svg);var o=t.gap.offsetWidth;Me(t.svg,"width",o,"height",t.gap.offsetHeight)}t.copyButtons&&ce(t.copyButtons);for(var u=t.edit.getViewport(),d=t.orig.getViewport(),v=t.mv.wrap.getBoundingClientRect().top,m=v-t.edit.getScrollerElement().getBoundingClientRect().top+t.edit.getScrollInfo().top,k=v-t.orig.getScrollerElement().getBoundingClientRect().top+t.orig.getScrollInfo().top,A=0;A<t.chunks.length;A++){var C=t.chunks[A];C.editFrom<=u.to&&C.editTo>=u.from&&C.origFrom<=d.to&&C.origTo>=d.from&&R(t,C,k,m,o)}}}function D(t,o){for(var u=0,d=0,v=0;v<o.length;v++){var m=o[v];if(m.editTo>t&&m.editFrom<=t)return null;if(m.editFrom>t)break;u=m.editTo,d=m.origTo}return d+(t-u)}function M(t,o,u){for(var d=t.state.trackAlignable,v=t.firstLine(),m=0,k=[],A=0;;A++){for(var C=o[A],V=C?u?C.origFrom:C.editFrom:1e9;m<d.alignable.length;m+=2){var U=d.alignable[m]+1;if(!(U<=v))if(U<=V)k.push(U);else break}if(!C)break;k.push(v=u?C.origTo:C.editTo)}return k}function L(t,o,u,d){var v=0,m=0,k=0,A=0;e:for(;;v++){var C=t[v],V=o[m];if(!C&&V==null)break;for(var U=C?C[0]:1e9,H=V==null?1e9:V;k<u.length;){var W=u[k];if(W.origFrom<=H&&W.origTo>H){m++,v--;continue e}if(W.editTo>U){if(W.editFrom<=U)continue e;break}A+=W.origTo-W.origFrom-(W.editTo-W.editFrom),k++}if(U==H-A)C[d]=H,m++;else if(U<H-A)C[d]=U+A;else{var j=[H-A,null,null];j[d]=H,t.splice(v,0,j),m++}}}function N(t,o){var u=M(t.edit,t.chunks,!1),d=[];if(o)for(var v=0,m=0;v<o.chunks.length;v++){for(var k=o.chunks[v].editTo;m<u.length&&u[m]<k;)m++;(m==u.length||u[m]!=k)&&u.splice(m++,0,k)}for(var v=0;v<u.length;v++)d.push([u[v],null,null]);return L(d,M(t.orig,t.chunks,!0),t.chunks,1),o&&L(d,M(o.orig,o.chunks,!0),o.chunks,2),d}function F(t,o){if(!(!t.dealigned&&!o)){if(!t.orig.curOp)return t.orig.operation(function(){F(t,o)});t.dealigned=!1;var u=t.mv.left==t?t.mv.right:t.mv.left;u&&(n(u),u.dealigned=!1);for(var d=N(t,u),v=t.mv.aligners,m=0;m<v.length;m++)v[m].clear();v.length=0;var k=[t.edit,t.orig],A=[],C=[];u&&k.push(u.orig);for(var m=0;m<k.length;m++)A.push(k[m].getScrollInfo().top),C.push(-k[m].getScrollerElement().getBoundingClientRect().top);(C[0]!=C[1]||k.length==3&&C[1]!=C[2])&&E(k,C,[0,0,0],v);for(var V=0;V<d.length;V++)E(k,C,d[V],v);for(var m=0;m<k.length;m++)k[m].scrollTo(null,A[m])}}function E(t,o,u,d){for(var v=-1e8,m=[],k=0;k<t.length;k++)if(u[k]!=null){var A=t[k].heightAtLine(u[k],"local")-o[k];m[k]=A,v=Math.max(v,A)}for(var k=0;k<t.length;k++)if(u[k]!=null){var C=v-m[k];C>1&&d.push(I(t[k],u[k],C))}}function I(t,o,u){var d=!0;o>t.lastLine()&&(o--,d=!1);var v=document.createElement("div");return v.className="CodeMirror-merge-spacer",v.style.height=u+"px",v.style.minWidth="1px",t.addLineWidget(o,v,{height:u,above:d,mergeSpacer:!0,handleMouseEvents:!0})}function R(t,o,u,d,v){var m=t.type=="left",k=t.orig.heightAtLine(o.origFrom,"local",!0)-u;if(t.svg){var A=k,C=t.edit.heightAtLine(o.editFrom,"local",!0)-d;if(m){var V=A;A=C,C=V}var U=t.orig.heightAtLine(o.origTo,"local",!0)-u,H=t.edit.heightAtLine(o.editTo,"local",!0)-d;if(m){var V=U;U=H,H=V}var W=" C "+v/2+" "+C+" "+v/2+" "+A+" "+(v+2)+" "+A,j=" C "+v/2+" "+U+" "+v/2+" "+H+" -1 "+H;Me(t.svg.appendChild(document.createElementNS(y,"path")),"d","M -1 "+C+W+" L "+(v+2)+" "+U+j+" z","class",t.classes.connect)}if(t.copyButtons){var $=t.copyButtons.appendChild(K("div",t.type=="left"?"\u21DD":"\u21DC","CodeMirror-merge-copy")),Z=t.mv.options.allowEditingOriginals;if($.title=t.edit.phrase(Z?"Push to left":"Revert chunk"),$.chunk=o,$.style.top=(o.origTo>o.origFrom?k:t.edit.heightAtLine(o.editFrom,"local")-d)+"px",$.setAttribute("role","button"),$.setAttribute("tabindex","0"),$.setAttribute("aria-label",$.title),Z){var X=t.edit.heightAtLine(o.editFrom,"local")-d,Q=t.copyButtons.appendChild(K("div",t.type=="right"?"\u21DD":"\u21DC","CodeMirror-merge-copy-reverse"));Q.title="Push to right",Q.chunk={editFrom:o.origFrom,editTo:o.origTo,origFrom:o.editFrom,origTo:o.editTo},Q.style.top=X+"px",t.type=="right"?Q.style.left="2px":Q.style.right="2px",Q.setAttribute("role","button"),Q.setAttribute("tabindex","0"),Q.setAttribute("aria-label",Q.title)}}}function B(t,o,u,d){if(!t.diffOutOfDate){var v=d.origTo>u.lastLine()?T(d.origFrom-1):T(d.origFrom,0),m=T(d.origTo,0),k=d.editTo>o.lastLine()?T(d.editFrom-1):T(d.editFrom,0),A=T(d.editTo,0),C=t.mv.options.revertChunk;C?C(t.mv,u,v,m,o,k,A):o.replaceRange(u.getRange(v,m),k,A)}}var P=b.MergeView=function(t,o){if(!(this instanceof P))return new P(t,o);this.options=o;var u=o.origLeft,d=o.origRight==null?o.orig:o.origRight,v=u!=null,m=d!=null,k=1+(v?1:0)+(m?1:0),A=[],C=this.left=null,V=this.right=null,U=this;if(v){C=this.left=new e(this,"left");var H=K("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");A.push(H),A.push(z(C))}var W=K("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(A.push(W),m){V=this.right=new e(this,"right"),A.push(z(V));var j=K("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");A.push(j)}(m?j:W).className+=" CodeMirror-merge-pane-rightmost",A.push(K("div",null,null,"height: 0; clear: both;"));var $=this.wrap=t.appendChild(K("div",A,"CodeMirror-merge CodeMirror-merge-"+k+"pane"));this.edit=b(W,be(o)),C&&C.init(H,u,o),V&&V.init(j,d,o),o.collapseIdentical&&this.editor().operation(function(){Xe(U,o.collapseIdentical)}),o.connect=="align"&&(this.aligners=[],F(this.left||this.right,!0)),C&&C.registerEvents(V),V&&V.registerEvents(C);var Z=function(){C&&S(C),V&&S(V)};b.on(window,"resize",Z);var X=setInterval(function(){for(var Q=$.parentNode;Q&&Q!=document.body;Q=Q.parentNode);Q||(clearInterval(X),b.off(window,"resize",Z))},5e3)};function z(t){var o=t.lockButton=K("div",null,"CodeMirror-merge-scrolllock");o.setAttribute("role","button"),o.setAttribute("tabindex","0");var u=K("div",[o],"CodeMirror-merge-scrolllock-wrap");b.on(o,"click",function(){s(t,!t.lockScroll)}),b.on(o,"keyup",function(k){(k.key==="Enter"||k.code==="Space")&&s(t,!t.lockScroll)});var d=[u];if(t.mv.options.revertButtons!==!1){t.copyButtons=K("div",null,"CodeMirror-merge-copybuttons-"+t.type);var v=function(k){var A=k.target||k.srcElement;if(!!A.chunk){if(A.className=="CodeMirror-merge-copy-reverse"){B(t,t.orig,t.edit,A.chunk);return}B(t,t.edit,t.orig,A.chunk)}};b.on(t.copyButtons,"click",v),b.on(t.copyButtons,"keyup",function(k){(k.key==="Enter"||k.code==="Space")&&v(k)}),d.unshift(t.copyButtons)}if(t.mv.options.connect!="align"){var m=document.createElementNS&&document.createElementNS(y,"svg");m&&!m.createSVGRect&&(m=null),t.svg=m,m&&d.push(m)}return t.gap=K("div",d,"CodeMirror-merge-gap")}P.prototype={constructor:P,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(t){this.right&&this.right.setShowDifferences(t),this.left&&this.left.setShowDifferences(t)},rightChunks:function(){if(this.right)return n(this.right),this.right.chunks},leftChunks:function(){if(this.left)return n(this.left),this.left.chunks}};function G(t){return typeof t=="string"?t:t.getValue()}var ee;function Ee(t,o,u){ee||(ee=new diff_match_patch);for(var d=ee.diff_main(t,o),v=0;v<d.length;++v){var m=d[v];(u?!/[^ \t]/.test(m[1]):!m[1])?d.splice(v--,1):v&&d[v-1][0]==m[0]&&(d.splice(v--,1),d[v][1]+=m[1])}return d}function Te(t){var o=[];if(!t.length)return o;for(var u=0,d=0,v=T(0,0),m=T(0,0),k=0;k<t.length;++k){var A=t[k],C=A[0];if(C==DIFF_EQUAL){var V=!Ce(t,k)||v.line<u||m.line<d?1:0,U=v.line+V,H=m.line+V;de(v,A[1],null,m);var W=Ae(t,k)?1:0,j=v.line+W,$=m.line+W;j>U&&(k&&o.push({origFrom:d,origTo:H,editFrom:u,editTo:U}),u=j,d=$)}else de(C==DIFF_INSERT?v:m,A[1])}return(u<=v.line||d<=m.line)&&o.push({origFrom:d,origTo:m.line+1,editFrom:u,editTo:v.line+1}),o}function Ae(t,o){if(o==t.length-1)return!0;var u=t[o+1][1];return u.length==1&&o<t.length-2||u.charCodeAt(0)!=10?!1:o==t.length-2?!0:(u=t[o+2][1],(u.length>1||o==t.length-3)&&u.charCodeAt(0)==10)}function Ce(t,o){if(o==0)return!0;var u=t[o-1][1];return u.charCodeAt(u.length-1)!=10?!1:o==1?!0:(u=t[o-2][1],u.charCodeAt(u.length-1)==10)}function qe(t,o,u){for(var d,v,m,k,A=0;A<t.length;A++){var C=t[A],V=u?C.editFrom:C.origFrom,U=u?C.editTo:C.origTo;v==null&&(V>o?(v=C.editFrom,k=C.origFrom):U>o&&(v=C.editTo,k=C.origTo)),U<=o?(d=C.editTo,m=C.origTo):V<=o&&(d=C.editFrom,m=C.origFrom)}return{edit:{before:d,after:v},orig:{before:m,after:k}}}function Ze(t,o,u){t.addLineClass(o,"wrap","CodeMirror-merge-collapsed-line");var d=document.createElement("span");d.className="CodeMirror-merge-collapsed-widget",d.title=t.phrase("Identical text collapsed. Click to expand.");var v=t.markText(T(o,0),T(u-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:d,clearOnEnter:!0});function m(){v.clear(),t.removeLineClass(o,"wrap","CodeMirror-merge-collapsed-line")}return v.explicitlyCleared&&m(),b.on(d,"click",m),v.on("clear",m),b.on(d,"click",m),{mark:v,clear:m}}function Ke(t,o){var u=[];function d(){for(var A=0;A<u.length;A++)u[A].clear()}for(var v=0;v<o.length;v++){var m=o[v],k=Ze(m.cm,m.line,m.line+t);u.push(k),k.mark.on("clear",d)}return u[0].mark}function Fe(t,o,u,d){for(var v=0;v<t.chunks.length;v++)for(var m=t.chunks[v],k=m.editFrom-o;k<m.editTo+o;k++){var A=k+u;A>=0&&A<d.length&&(d[A]=!1)}}function Xe(t,o){typeof o!="number"&&(o=2);for(var u=[],d=t.editor(),v=d.firstLine(),m=v,k=d.lastLine();m<=k;m++)u.push(!0);t.left&&Fe(t.left,o,v,u),t.right&&Fe(t.right,o,v,u);for(var A=0;A<u.length;A++)if(u[A]){for(var C=A+v,V=1;A<u.length-1&&u[A+1];A++,V++);if(V>o){var U=[{line:C,cm:d}];t.left&&U.push({line:D(C,t.left.chunks),cm:t.left.orig}),t.right&&U.push({line:D(C,t.right.chunks),cm:t.right.orig});var H=Ke(V,U);t.options.onCollapse&&t.options.onCollapse(t,C,V,H)}}}function K(t,o,u,d){var v=document.createElement(t);if(u&&(v.className=u),d&&(v.style.cssText=d),typeof o=="string")v.appendChild(document.createTextNode(o));else if(o)for(var m=0;m<o.length;++m)v.appendChild(o[m]);return v}function ce(t){for(var o=t.childNodes.length;o>0;--o)t.removeChild(t.firstChild)}function Me(t){for(var o=1;o<arguments.length;o+=2)t.setAttribute(arguments[o],arguments[o+1])}function be(t,o){o||(o={});for(var u in t)t.hasOwnProperty(u)&&(o[u]=t[u]);return o}function de(t,o,u,d){for(var v=u?T(t.line,t.ch):t,m=0;;){var k=o.indexOf(`
`,m);if(k==-1)break;++v.line,d&&++d.line,m=k+1}return v.ch=(m?0:v.ch)+(o.length-m),d&&(d.ch=(m?0:d.ch)+(o.length-m)),v}var Oe=1,te=2,ve=4;function _e(t){this.cm=t,this.alignable=[],this.height=t.doc.height;var o=this;t.on("markerAdded",function(u,d){if(!!d.collapsed){var v=d.find(1);v!=null&&o.set(v.line,ve)}}),t.on("markerCleared",function(u,d,v,m){m!=null&&d.collapsed&&o.check(m,ve,o.hasMarker)}),t.on("markerChanged",this.signal.bind(this)),t.on("lineWidgetAdded",function(u,d,v){d.mergeSpacer||(d.above?o.set(v-1,te):o.set(v,Oe))}),t.on("lineWidgetCleared",function(u,d,v){d.mergeSpacer||(d.above?o.check(v-1,te,o.hasWidgetBelow):o.check(v,Oe,o.hasWidget))}),t.on("lineWidgetChanged",this.signal.bind(this)),t.on("change",function(u,d){var v=d.from.line,m=d.to.line-d.from.line,k=d.text.length-1,A=v+k;(m||k)&&o.map(v,m,k),o.check(A,ve,o.hasMarker),(m||k)&&o.check(d.from.line,ve,o.hasMarker)}),t.on("viewportChange",function(){o.cm.doc.height!=o.height&&o.signal()})}_e.prototype={signal:function(){b.signal(this,"realign"),this.height=this.cm.doc.height},set:function(t,o){for(var u=-1;u<this.alignable.length;u+=2){var d=this.alignable[u]-t;if(d==0){if((this.alignable[u+1]&o)==o)return;this.alignable[u+1]|=o,this.signal();return}if(d>0)break}this.signal(),this.alignable.splice(u,0,t,o)},find:function(t){for(var o=0;o<this.alignable.length;o+=2)if(this.alignable[o]==t)return o;return-1},check:function(t,o,u){var d=this.find(t);if(!(d==-1||!(this.alignable[d+1]&o))&&!u.call(this,t)){this.signal();var v=this.alignable[d+1]&~o;v?this.alignable[d+1]=v:this.alignable.splice(d,2)}},hasMarker:function(t){var o=this.cm.getLineHandle(t);if(o.markedSpans){for(var u=0;u<o.markedSpans.length;u++)if(o.markedSpans[u].marker.collapsed&&o.markedSpans[u].to!=null)return!0}return!1},hasWidget:function(t){var o=this.cm.getLineHandle(t);if(o.widgets){for(var u=0;u<o.widgets.length;u++)if(!o.widgets[u].above&&!o.widgets[u].mergeSpacer)return!0}return!1},hasWidgetBelow:function(t){if(t==this.cm.lastLine())return!1;var o=this.cm.getLineHandle(t+1);if(o.widgets){for(var u=0;u<o.widgets.length;u++)if(o.widgets[u].above&&!o.widgets[u].mergeSpacer)return!0}return!1},map:function(t,o,u){for(var d=u-o,v=t+o,m=-1,k=-1,A=0;A<this.alignable.length;A+=2){var C=this.alignable[A];C==t&&this.alignable[A+1]&te&&(m=A),C==v&&this.alignable[A+1]&te&&(k=A),!(C<=t)&&(C<v?this.alignable.splice(A--,2):this.alignable[A]+=d)}if(m>-1){var V=this.alignable[m+1];V==te?this.alignable.splice(m,2):this.alignable[m+1]=V&~te}k>-1&&u&&this.set(t+u,te)}};function Ye(t,o){return(t.line-o.line||t.ch-o.ch)<0?t:o}function xe(t,o){return(t.line-o.line||t.ch-o.ch)>0?t:o}function et(t,o){return t.line==o.line&&t.ch==o.ch}function tt(t,o,u){for(var d=t.length-1;d>=0;d--){var v=t[d],m=(u?v.origTo:v.editTo)-1;if(m<o)return m}}function nt(t,o,u){for(var d=0;d<t.length;d++){var v=t[d],m=u?v.origFrom:v.editFrom;if(m>o)return m}}function Ie(t,o){var u=null,d=t.state.diffViews,v=t.getCursor().line;if(d)for(var m=0;m<d.length;m++){var k=d[m],A=t==k.orig;n(k);var C=o<0?tt(k.chunks,v,A):nt(k.chunks,v,A);C!=null&&(u==null||(o<0?C>u:C<u))&&(u=C)}if(u!=null)t.setCursor(u,0);else return b.Pass}b.commands.goNextDiff=function(t){return Ie(t,1)},b.commands.goPrevDiff=function(t){return Ie(t,-1)}})})();var Qe={exports:{}};(function(O){var _=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},b=-1,T=1,y=0;_.Diff=function(e,n){return[e,n]},_.prototype.diff_main=function(e,n,r,i){typeof i>"u"&&(this.Diff_Timeout<=0?i=Number.MAX_VALUE:i=new Date().getTime()+this.Diff_Timeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e==n)return e?[new _.Diff(y,e)]:[];typeof r>"u"&&(r=!0);var l=r,f=this.diff_commonPrefix(e,n),s=e.substring(0,f);e=e.substring(f),n=n.substring(f),f=this.diff_commonSuffix(e,n);var g=e.substring(e.length-f);e=e.substring(0,e.length-f),n=n.substring(0,n.length-f);var h=this.diff_compute_(e,n,l,a);return s&&h.unshift(new _.Diff(y,s)),g&&h.push(new _.Diff(y,g)),this.diff_cleanupMerge(h),h},_.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[new _.Diff(T,n)];if(!n)return[new _.Diff(b,e)];var l=e.length>n.length?e:n,f=e.length>n.length?n:e,s=l.indexOf(f);if(s!=-1)return a=[new _.Diff(T,l.substring(0,s)),new _.Diff(y,f),new _.Diff(T,l.substring(s+f.length))],e.length>n.length&&(a[0][0]=a[2][0]=b),a;if(f.length==1)return[new _.Diff(b,e),new _.Diff(T,n)];var g=this.diff_halfMatch_(e,n);if(g){var h=g[0],p=g[1],c=g[2],w=g[3],S=g[4],D=this.diff_main(h,c,r,i),M=this.diff_main(p,w,r,i);return D.concat([new _.Diff(y,S)],M)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},_.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars_(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,l=this.diff_main(e,n,!1,r);this.diff_charsToLines_(l,a),this.diff_cleanupSemantic(l),l.push(new _.Diff(y,""));for(var f=0,s=0,g=0,h="",p="";f<l.length;){switch(l[f][0]){case T:g++,p+=l[f][1];break;case b:s++,h+=l[f][1];break;case y:if(s>=1&&g>=1){l.splice(f-s-g,s+g),f=f-s-g;for(var c=this.diff_main(h,p,!1,r),w=c.length-1;w>=0;w--)l.splice(f,0,c[w]);f=f+c.length}g=0,s=0,h="",p="";break}f++}return l.pop(),l},_.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,l=Math.ceil((i+a)/2),f=l,s=2*l,g=new Array(s),h=new Array(s),p=0;p<s;p++)g[p]=-1,h[p]=-1;g[f+1]=0,h[f+1]=0;for(var c=i-a,w=c%2!=0,S=0,D=0,M=0,L=0,N=0;N<l&&!(new Date().getTime()>r);N++){for(var F=-N+S;F<=N-D;F+=2){var E=f+F,I;F==-N||F!=N&&g[E-1]<g[E+1]?I=g[E+1]:I=g[E-1]+1;for(var R=I-F;I<i&&R<a&&e.charAt(I)==n.charAt(R);)I++,R++;if(g[E]=I,I>i)D+=2;else if(R>a)S+=2;else if(w){var B=f+c-F;if(B>=0&&B<s&&h[B]!=-1){var P=i-h[B];if(I>=P)return this.diff_bisectSplit_(e,n,I,R,r)}}}for(var z=-N+M;z<=N-L;z+=2){var B=f+z,P;z==-N||z!=N&&h[B-1]<h[B+1]?P=h[B+1]:P=h[B-1]+1;for(var G=P-z;P<i&&G<a&&e.charAt(i-P-1)==n.charAt(a-G-1);)P++,G++;if(h[B]=P,P>i)L+=2;else if(G>a)M+=2;else if(!w){var E=f+c-z;if(E>=0&&E<s&&g[E]!=-1){var I=g[E],R=f+I-E;if(P=i-P,I>=P)return this.diff_bisectSplit_(e,n,I,R,r)}}}}return[new _.Diff(b,e),new _.Diff(T,n)]},_.prototype.diff_bisectSplit_=function(e,n,r,i,a){var l=e.substring(0,r),f=n.substring(0,i),s=e.substring(r),g=n.substring(i),h=this.diff_main(l,f,!1,a),p=this.diff_main(s,g,!1,a);return h.concat(p)},_.prototype.diff_linesToChars_=function(e,n){var r=[],i={};r[0]="";function a(g){for(var h="",p=0,c=-1,w=r.length;c<g.length-1;){c=g.indexOf(`
`,p),c==-1&&(c=g.length-1);var S=g.substring(p,c+1);(i.hasOwnProperty?i.hasOwnProperty(S):i[S]!==void 0)?h+=String.fromCharCode(i[S]):(w==l&&(S=g.substring(p),c=g.length),h+=String.fromCharCode(w),i[S]=w,r[w++]=S),p=c+1}return h}var l=4e4,f=a(e);l=65535;var s=a(n);return{chars1:f,chars2:s,lineArray:r}},_.prototype.diff_charsToLines_=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],l=0;l<i.length;l++)a[l]=n[i.charCodeAt(l)];e[r][1]=a.join("")}},_.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!=n.charAt(0))return 0;for(var r=0,i=Math.min(e.length,n.length),a=i,l=0;r<a;)e.substring(l,a)==n.substring(l,a)?(r=a,l=r):i=a,a=Math.floor((i-r)/2+r);return a},_.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!=n.charAt(n.length-1))return 0;for(var r=0,i=Math.min(e.length,n.length),a=i,l=0;r<a;)e.substring(e.length-a,e.length-l)==n.substring(n.length-a,n.length-l)?(r=a,l=r):i=a,a=Math.floor((i-r)/2+r);return a},_.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r==0||i==0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=Math.min(r,i);if(e==n)return a;for(var l=0,f=1;;){var s=e.substring(a-f),g=n.indexOf(s);if(g==-1)return l;f+=g,(g==0||e.substring(a-f)==n.substring(0,f))&&(l=f,f++)}},_.prototype.diff_halfMatch_=function(e,n){if(this.Diff_Timeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this;function l(D,M,L){for(var N=D.substring(L,L+Math.floor(D.length/4)),F=-1,E="",I,R,B,P;(F=M.indexOf(N,F+1))!=-1;){var z=a.diff_commonPrefix(D.substring(L),M.substring(F)),G=a.diff_commonSuffix(D.substring(0,L),M.substring(0,F));E.length<G+z&&(E=M.substring(F-G,F)+M.substring(F,F+z),I=D.substring(0,L-G),R=D.substring(L+z),B=M.substring(0,F-G),P=M.substring(F+z))}return E.length*2>=D.length?[I,R,B,P,E]:null}var f=l(r,i,Math.ceil(r.length/4)),s=l(r,i,Math.ceil(r.length/2)),g;if(!f&&!s)return null;s?f?g=f[4].length>s[4].length?f:s:g=s:g=f;var h,p,c,w;e.length>n.length?(h=g[0],p=g[1],c=g[2],w=g[3]):(c=g[0],w=g[1],h=g[2],p=g[3]);var S=g[4];return[h,p,c,w,S]},_.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,l=0,f=0,s=0,g=0,h=0;l<e.length;)e[l][0]==y?(r[i++]=l,f=g,s=h,g=0,h=0,a=e[l][1]):(e[l][0]==T?g+=e[l][1].length:h+=e[l][1].length,a&&a.length<=Math.max(f,s)&&a.length<=Math.max(g,h)&&(e.splice(r[i-1],0,new _.Diff(b,a)),e[r[i-1]+1][0]=T,i--,i--,l=i>0?r[i-1]:-1,f=0,s=0,g=0,h=0,a=null,n=!0)),l++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==b&&e[l][0]==T){var p=e[l-1][1],c=e[l][1],w=this.diff_commonOverlap_(p,c),S=this.diff_commonOverlap_(c,p);w>=S?(w>=p.length/2||w>=c.length/2)&&(e.splice(l,0,new _.Diff(y,c.substring(0,w))),e[l-1][1]=p.substring(0,p.length-w),e[l+1][1]=c.substring(w),l++):(S>=p.length/2||S>=c.length/2)&&(e.splice(l,0,new _.Diff(y,p.substring(0,S))),e[l-1][0]=T,e[l-1][1]=c.substring(0,c.length-S),e[l+1][0]=b,e[l+1][1]=p.substring(S),l++),l++}l++}},_.prototype.diff_cleanupSemanticLossless=function(e){function n(S,D){if(!S||!D)return 6;var M=S.charAt(S.length-1),L=D.charAt(0),N=M.match(_.nonAlphaNumericRegex_),F=L.match(_.nonAlphaNumericRegex_),E=N&&M.match(_.whitespaceRegex_),I=F&&L.match(_.whitespaceRegex_),R=E&&M.match(_.linebreakRegex_),B=I&&L.match(_.linebreakRegex_),P=R&&S.match(_.blanklineEndRegex_),z=B&&D.match(_.blanklineStartRegex_);return P||z?5:R||B?4:N&&!E&&I?3:E||I?2:N||F?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==y&&e[r+1][0]==y){var i=e[r-1][1],a=e[r][1],l=e[r+1][1],f=this.diff_commonSuffix(i,a);if(f){var s=a.substring(a.length-f);i=i.substring(0,i.length-f),a=s+a.substring(0,a.length-f),l=s+l}for(var g=i,h=a,p=l,c=n(i,a)+n(a,l);a.charAt(0)===l.charAt(0);){i+=a.charAt(0),a=a.substring(1)+l.charAt(0),l=l.substring(1);var w=n(i,a)+n(a,l);w>=c&&(c=w,g=i,h=a,p=l)}e[r-1][1]!=g&&(g?e[r-1][1]=g:(e.splice(r-1,1),r--),e[r][1]=h,p?e[r+1][1]=p:(e.splice(r+1,1),r--))}r++}},_.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,_.whitespaceRegex_=/\s/,_.linebreakRegex_=/[\r\n]/,_.blanklineEndRegex_=/\n\r?\n$/,_.blanklineStartRegex_=/^\r?\n\r?\n/,_.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,l=0,f=!1,s=!1,g=!1,h=!1;l<e.length;)e[l][0]==y?(e[l][1].length<this.Diff_EditCost&&(g||h)?(r[i++]=l,f=g,s=h,a=e[l][1]):(i=0,a=null),g=h=!1):(e[l][0]==b?h=!0:g=!0,a&&(f&&s&&g&&h||a.length<this.Diff_EditCost/2&&f+s+g+h==3)&&(e.splice(r[i-1],0,new _.Diff(b,a)),e[r[i-1]+1][0]=T,i--,a=null,f&&s?(g=h=!0,i=0):(i--,l=i>0?r[i-1]:-1,g=h=!1),n=!0)),l++;n&&this.diff_cleanupMerge(e)},_.prototype.diff_cleanupMerge=function(e){e.push(new _.Diff(y,""));for(var n=0,r=0,i=0,a="",l="",f;n<e.length;)switch(e[n][0]){case T:i++,l+=e[n][1],n++;break;case b:r++,a+=e[n][1],n++;break;case y:r+i>1?(r!==0&&i!==0&&(f=this.diff_commonPrefix(l,a),f!==0&&(n-r-i>0&&e[n-r-i-1][0]==y?e[n-r-i-1][1]+=l.substring(0,f):(e.splice(0,0,new _.Diff(y,l.substring(0,f))),n++),l=l.substring(f),a=a.substring(f)),f=this.diff_commonSuffix(l,a),f!==0&&(e[n][1]=l.substring(l.length-f)+e[n][1],l=l.substring(0,l.length-f),a=a.substring(0,a.length-f))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,new _.Diff(b,a)),n++),l.length&&(e.splice(n,0,new _.Diff(T,l)),n++),n++):n!==0&&e[n-1][0]==y?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",l="";break}e[e.length-1][1]===""&&e.pop();var s=!1;for(n=1;n<e.length-1;)e[n-1][0]==y&&e[n+1][0]==y&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),s=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(e)},_.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,l=0,f;for(f=0;f<e.length&&(e[f][0]!==T&&(r+=e[f][1].length),e[f][0]!==b&&(i+=e[f][1].length),!(r>n));f++)a=r,l=i;return e.length!=f&&e[f][0]===b?l:l+(n-a)},_.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,l=/\n/g,f=0;f<e.length;f++){var s=e[f][0],g=e[f][1],h=g.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(s){case T:n[f]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case b:n[f]='<del style="background:#ffe6e6;">'+h+"</del>";break;case y:n[f]="<span>"+h+"</span>";break}}return n.join("")},_.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==T&&(n[r]=e[r][1]);return n.join("")},_.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==b&&(n[r]=e[r][1]);return n.join("")},_.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var l=e[a][0],f=e[a][1];switch(l){case T:r+=f.length;break;case b:i+=f.length;break;case y:n+=Math.max(r,i),r=0,i=0;break}}return n+=Math.max(r,i),n},_.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case T:n[r]="+"+encodeURI(e[r][1]);break;case b:n[r]="-"+e[r][1].length;break;case y:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},_.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,l=n.split(/\t/g),f=0;f<l.length;f++){var s=l[f].substring(1);switch(l[f].charAt(0)){case"+":try{r[i++]=new _.Diff(T,decodeURI(s))}catch{throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var g=parseInt(s,10);if(isNaN(g)||g<0)throw new Error("Invalid number in diff_fromDelta: "+s);var h=e.substring(a,a+=g);l[f].charAt(0)=="="?r[i++]=new _.Diff(y,h):r[i++]=new _.Diff(b,h);break;default:if(l[f])throw new Error("Invalid diff operation in diff_fromDelta: "+l[f])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return r},_.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=Math.max(0,Math.min(r,e.length)),e==n?0:e.length?e.substring(r,r+n.length)==n?r:this.match_bitap_(e,n,r):-1},_.prototype.match_bitap_=function(e,n,r){if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(n),a=this;function l(I,R){var B=I/n.length,P=Math.abs(r-R);return a.Match_Distance?B+P/a.Match_Distance:P?1:B}var f=this.Match_Threshold,s=e.indexOf(n,r);s!=-1&&(f=Math.min(l(0,s),f),s=e.lastIndexOf(n,r+n.length),s!=-1&&(f=Math.min(l(0,s),f)));var g=1<<n.length-1;s=-1;for(var h,p,c=n.length+e.length,w,S=0;S<n.length;S++){for(h=0,p=c;h<p;)l(S,r+p)<=f?h=p:c=p,p=Math.floor((c-h)/2+h);c=p;var D=Math.max(1,r-p+1),M=Math.min(r+p,e.length)+n.length,L=Array(M+2);L[M+1]=(1<<S)-1;for(var N=M;N>=D;N--){var F=i[e.charAt(N-1)];if(S===0?L[N]=(L[N+1]<<1|1)&F:L[N]=(L[N+1]<<1|1)&F|((w[N+1]|w[N])<<1|1)|w[N+1],L[N]&g){var E=l(S,N-1);if(E<=f)if(f=E,s=N-1,s>r)D=Math.max(1,2*r-s);else break}}if(l(S+1,r)>f)break;w=L}return s},_.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},_.prototype.patch_addContext_=function(e,n){if(n.length!=0){if(e.start2===null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!=n.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift(new _.Diff(y,a));var l=n.substring(e.start2+e.length1,e.start2+e.length1+i);l&&e.diffs.push(new _.Diff(y,l)),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+l.length,e.length2+=a.length+l.length}},_.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r>"u")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n>"u"&&typeof r>"u")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r>"u")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make.");if(a.length===0)return[];for(var l=[],f=new _.patch_obj,s=0,g=0,h=0,p=i,c=i,w=0;w<a.length;w++){var S=a[w][0],D=a[w][1];switch(!s&&S!==y&&(f.start1=g,f.start2=h),S){case T:f.diffs[s++]=a[w],f.length2+=D.length,c=c.substring(0,h)+D+c.substring(h);break;case b:f.length1+=D.length,f.diffs[s++]=a[w],c=c.substring(0,h)+c.substring(h+D.length);break;case y:D.length<=2*this.Patch_Margin&&s&&a.length!=w+1?(f.diffs[s++]=a[w],f.length1+=D.length,f.length2+=D.length):D.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(f,p),l.push(f),f=new _.patch_obj,s=0,p=c,g=h);break}S!==T&&(g+=D.length),S!==b&&(h+=D.length)}return s&&(this.patch_addContext_(f,p),l.push(f)),l},_.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=new _.patch_obj;a.diffs=[];for(var l=0;l<i.diffs.length;l++)a.diffs[l]=new _.Diff(i.diffs[l][0],i.diffs[l][1]);a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},_.prototype.patch_apply=function(e,n){if(e.length==0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],l=0;l<e.length;l++){var f=e[l].start2+i,s=this.diff_text1(e[l].diffs),g,h=-1;if(s.length>this.Match_MaxBits?(g=this.match_main(n,s.substring(0,this.Match_MaxBits),f),g!=-1&&(h=this.match_main(n,s.substring(s.length-this.Match_MaxBits),f+s.length-this.Match_MaxBits),(h==-1||g>=h)&&(g=-1))):g=this.match_main(n,s,f),g==-1)a[l]=!1,i-=e[l].length2-e[l].length1;else{a[l]=!0,i=g-f;var p;if(h==-1?p=n.substring(g,g+s.length):p=n.substring(g,h+this.Match_MaxBits),s==p)n=n.substring(0,g)+this.diff_text2(e[l].diffs)+n.substring(g+s.length);else{var c=this.diff_main(s,p,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(c)/s.length>this.Patch_DeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(c);for(var w=0,S,D=0;D<e[l].diffs.length;D++){var M=e[l].diffs[D];M[0]!==y&&(S=this.diff_xIndex(c,w)),M[0]===T?n=n.substring(0,g+S)+M[1]+n.substring(g+S):M[0]===b&&(n=n.substring(0,g+S)+n.substring(g+this.diff_xIndex(c,w+M[1].length))),M[0]!==b&&(w+=M[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},_.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],l=a.diffs;if(l.length==0||l[0][0]!=y)l.unshift(new _.Diff(y,r)),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>l[0][1].length){var f=n-l[0][1].length;l[0][1]=r.substring(l[0][1].length)+l[0][1],a.start1-=f,a.start2-=f,a.length1+=f,a.length2+=f}if(a=e[e.length-1],l=a.diffs,l.length==0||l[l.length-1][0]!=y)l.push(new _.Diff(y,r)),a.length1+=n,a.length2+=n;else if(n>l[l.length-1][1].length){var f=n-l[l.length-1][1].length;l[l.length-1][1]+=r.substring(0,f),a.length1+=f,a.length2+=f}return r},_.prototype.patch_splitMax=function(e){for(var n=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,l=i.start2,f="";i.diffs.length!==0;){var s=new _.patch_obj,g=!0;for(s.start1=a-f.length,s.start2=l-f.length,f!==""&&(s.length1=s.length2=f.length,s.diffs.push(new _.Diff(y,f)));i.diffs.length!==0&&s.length1<n-this.Patch_Margin;){var h=i.diffs[0][0],p=i.diffs[0][1];h===T?(s.length2+=p.length,l+=p.length,s.diffs.push(i.diffs.shift()),g=!1):h===b&&s.diffs.length==1&&s.diffs[0][0]==y&&p.length>2*n?(s.length1+=p.length,a+=p.length,g=!1,s.diffs.push(new _.Diff(h,p)),i.diffs.shift()):(p=p.substring(0,n-s.length1-this.Patch_Margin),s.length1+=p.length,a+=p.length,h===y?(s.length2+=p.length,l+=p.length):g=!1,s.diffs.push(new _.Diff(h,p)),p==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(p.length))}f=this.diff_text2(s.diffs),f=f.substring(f.length-this.Patch_Margin);var c=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);c!==""&&(s.length1+=c.length,s.length2+=c.length,s.diffs.length!==0&&s.diffs[s.diffs.length-1][0]===y?s.diffs[s.diffs.length-1][1]+=c:s.diffs.push(new _.Diff(y,c))),g||e.splice(++r,0,s)}}},_.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},_.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var l=r[i].match(a);if(!l)throw new Error("Invalid patch string: "+r[i]);var f=new _.patch_obj;for(n.push(f),f.start1=parseInt(l[1],10),l[2]===""?(f.start1--,f.length1=1):l[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(l[2],10)),f.start2=parseInt(l[3],10),l[4]===""?(f.start2--,f.length2=1):l[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(l[4],10)),i++;i<r.length;){var s=r[i].charAt(0);try{var g=decodeURI(r[i].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+g)}if(s=="-")f.diffs.push(new _.Diff(b,g));else if(s=="+")f.diffs.push(new _.Diff(T,g));else if(s==" ")f.diffs.push(new _.Diff(y,g));else{if(s=="@")break;if(s!=="")throw new Error('Invalid patch mode "'+s+'" in: '+g)}i++}}return n},_.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},_.patch_obj.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2==1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case T:i="+";break;case b:i="-";break;case y:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},O.exports=_,O.exports.diff_match_patch=_,O.exports.DIFF_DELETE=b,O.exports.DIFF_INSERT=T,O.exports.DIFF_EQUAL=y})(Qe);const pt=Qe.exports;(function(O,_){(function(b){b(ae())})(function(b){b.defineSimpleMode=function(s,g){b.defineMode(s,function(h){return b.simpleMode(h,g)})},b.simpleMode=function(s,g){T(g,"start");var h={},p=g.meta||{},c=!1;for(var w in g)if(w!=p&&g.hasOwnProperty(w))for(var S=h[w]=[],D=g[w],M=0;M<D.length;M++){var L=D[M];S.push(new n(L,g)),(L.indent||L.dedent)&&(c=!0)}var N={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:c?[]:null}},copyState:function(E){var I={state:E.state,pending:E.pending,local:E.local,localState:null,indent:E.indent&&E.indent.slice(0)};E.localState&&(I.localState=b.copyState(E.local.mode,E.localState)),E.stack&&(I.stack=E.stack.slice(0));for(var R=E.persistentStates;R;R=R.next)I.persistentStates={mode:R.mode,spec:R.spec,state:R.state==E.localState?I.localState:b.copyState(R.mode,R.state),next:I.persistentStates};return I},token:r(h,s),innerMode:function(E){return E.local&&{mode:E.local.mode,state:E.localState}},indent:f(h,p)};if(p)for(var F in p)p.hasOwnProperty(F)&&(N[F]=p[F]);return N};function T(s,g){if(!s.hasOwnProperty(g))throw new Error("Undefined state "+g+" in simple mode")}function y(s,g){if(!s)return/(?:)/;var h="";return s instanceof RegExp?(s.ignoreCase&&(h="i"),s.unicode&&(h+="u"),s=s.source):s=String(s),new RegExp((g===!1?"":"^")+"(?:"+s+")",h)}function e(s){if(!s)return null;if(s.apply)return s;if(typeof s=="string")return s.replace(/\./g," ");for(var g=[],h=0;h<s.length;h++)g.push(s[h]&&s[h].replace(/\./g," "));return g}function n(s,g){(s.next||s.push)&&T(g,s.next||s.push),this.regex=y(s.regex),this.token=e(s.token),this.data=s}function r(s,g){return function(h,p){if(p.pending){var c=p.pending.shift();return p.pending.length==0&&(p.pending=null),h.pos+=c.text.length,c.token}if(p.local)if(p.local.end&&h.match(p.local.end)){var w=p.local.endToken||null;return p.local=p.localState=null,w}else{var w=p.local.mode.token(h,p.localState),S;return p.local.endScan&&(S=p.local.endScan.exec(h.current()))&&(h.pos=h.start+S.index),w}for(var D=s[p.state],M=0;M<D.length;M++){var L=D[M],N=(!L.data.sol||h.sol())&&h.match(L.regex);if(N){L.data.next?p.state=L.data.next:L.data.push?((p.stack||(p.stack=[])).push(p.state),p.state=L.data.push):L.data.pop&&p.stack&&p.stack.length&&(p.state=p.stack.pop()),L.data.mode&&a(g,p,L.data.mode,L.token),L.data.indent&&p.indent.push(h.indentation()+g.indentUnit),L.data.dedent&&p.indent.pop();var F=L.token;if(F&&F.apply&&(F=F(N)),N.length>2&&L.token&&typeof L.token!="string"){for(var E=2;E<N.length;E++)N[E]&&(p.pending||(p.pending=[])).push({text:N[E],token:L.token[E-1]});return h.backUp(N[0].length-(N[1]?N[1].length:0)),F[0]}else return F&&F.join?F[0]:F}}return h.next(),null}}function i(s,g){if(s===g)return!0;if(!s||typeof s!="object"||!g||typeof g!="object")return!1;var h=0;for(var p in s)if(s.hasOwnProperty(p)){if(!g.hasOwnProperty(p)||!i(s[p],g[p]))return!1;h++}for(var p in g)g.hasOwnProperty(p)&&h--;return h==0}function a(s,g,h,p){var c;if(h.persistent)for(var w=g.persistentStates;w&&!c;w=w.next)(h.spec?i(h.spec,w.spec):h.mode==w.mode)&&(c=w);var S=c?c.mode:h.mode||b.getMode(s,h.spec),D=c?c.state:b.startState(S);h.persistent&&!c&&(g.persistentStates={mode:S,spec:h.spec,state:D,next:g.persistentStates}),g.localState=D,g.local={mode:S,end:h.end&&y(h.end),endScan:h.end&&h.forceEnd!==!1&&y(h.end,!1),endToken:p&&p.join?p[p.length-1]:p}}function l(s,g){for(var h=0;h<g.length;h++)if(g[h]===s)return!0}function f(s,g){return function(h,p,c){if(h.local&&h.local.mode.indent)return h.local.mode.indent(h.localState,p,c);if(h.indent==null||h.local||g.dontIndentStates&&l(h.state,g.dontIndentStates)>-1)return b.Pass;var w=h.indent.length-1,S=s[h.state];e:for(;;){for(var D=0;D<S.length;D++){var M=S[D];if(M.data.dedent&&M.data.dedentIfLineStart!==!1){var L=M.regex.exec(p);if(L&&L[0]){w--,(M.next||M.push)&&(S=s[M.next||M.push]),p=p.slice(L[0].length);continue e}}}break}return w<0?0:h.indent[w]}}})})();!window.CodeMirror&&(window.CodeMirror=$e);const he=window.CodeMirror||$e,mt=ue({name:"DefaultMode",props:{name:{type:String,default:`cm-textarea-${+new Date}`},value:{type:String,default:""},content:{type:String,default:""},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>null},placeholder:{type:String,default:""}},emits:{ready:O=>O,"update:cminstance":O=>O},setup(O,{emit:_}){const b=q(),T=q(null),y=()=>{T.value=ke(he.fromTextArea(b.value,O.options)),_("update:cminstance",T.value);const e=ie(()=>O.cminstance,n=>{var r;n&&((r=O.cminstance)==null||r.setValue(O.value||O.content)),_("ready",J(T)),e==null||e()},{deep:!0})};return me(()=>{y()}),{textarea:b,initialize:y}}}),De=(O,_)=>{const b=O.__vccOpts||O;for(const[T,y]of _)b[T]=y;return b},bt=["name","placeholder"];function _t(O,_,b,T,y,e){return le(),ge("textarea",{ref:"textarea",name:O.$props.name,placeholder:O.$props.placeholder},null,8,bt)}const He=De(mt,[["render",_t]]);window.diff_match_patch=pt;window.DIFF_DELETE=-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;const wt=ue({name:"MergeMode",props:{options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})}},emits:["update:cminstance","ready"],setup(O,{emit:_}){const b=q(),T=q(),y=()=>{b.value=ke(he.MergeView(T.value,O.options)),_("update:cminstance",b.value),_("ready",b)};return me(()=>{y()}),{mergeView:T,initialize:y}}}),yt={ref:"mergeView"};function kt(O,_,b,T,y,e){return le(),ge("div",yt,null,512)}const St=De(wt,[["render",kt]]);function Dt(O){const _=/#link#(.+)#link#/g,b=[];let T;for(T=_.exec(O);T;){const y=document.createElement("a"),e=JSON.parse(T[1]),n=Object.entries(e);for(const[r,i]of n)y.setAttribute(r,i);y.className="editor_custom_link",y.innerHTML="logDownload",b.push({start:T.index,end:T.index+T[0].length,node:y}),T=_.exec(O)}return b}function Et(O){const _=[];function b(){const T=/#log<(\w*)>log#((.|\r\n|\n)*?)#log<(\w*)>log#/g;let y;for(y=T.exec(O);y;){const e=y[0].replace(/\r\n/g,`
`).split(`
`),n=y[2].replace(/\r\n/g,`
`).split(`
`),r=document.createElement("span"),i=y[1];r.className=`c-editor--log__${i}`;let a=0;for(let l=0;l<e.length;l++){const f=e[l],s=n[l],g=r.cloneNode(!1);g.innerText=s,_.push({start:y.index+a,end:y.index+a+f.length,node:g}),a=a+f.length+1}y=T.exec(O)}}return b(),_}const pe=[{regex:/(\[.*?\])([ \t]*)(<error>[ \t])(.+)/,token:["tag","","error.strong","error.strong"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<info>)(.+)(.?)/,token:["tag","","bracket","bracket","hr"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<warning>)(.+)(.?)/,token:["tag","","comment","comment","hr"],sol:!0}];he.defineSimpleMode("fclog",{start:[...pe,{regex:/.*/,token:"hr"}],error:[...pe,{regex:/.*/,token:"error.strong"}],info:[...pe,{regex:/.*/,token:"bracket"}],warning:[...pe,{regex:/.*\[/,token:"comment"}]});he.defineSimpleMode("log",{start:[{regex:/^[=]+[^=]*[=]+/,token:"strong"},{regex:/([^\w])([A-Z][\w]*)/,token:["","string"]},{regex:/(^[A-Z][\w]*)/,token:"string"}]});const Tt=ue({name:"CodemirrorFclog",props:{value:{type:String,default:""},name:{type:String,default:`cm-textarea-${+new Date}`},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})},placeholder:{type:String,default:""}},emits:["update:cminstance","ready"],setup(O,{emit:_}){const b=q(),T=q(null),y=(n=O.cminstance)=>{n.getAllMarks().forEach(a=>a.clear());const r=n.getValue(),i=[].concat(Dt(r)).concat(Et(r));for(let a=0;a<i.length;a++){const l=i[a];n.markText(n.posFromIndex(l.start),n.posFromIndex(l.end),{replacedWith:l.node})}},e=()=>{var n;T.value=ke(he.fromTextArea(b.value,O.options)),_("update:cminstance",J(T)),(n=T.value)==null||n.on("change",y)};return ie(()=>O.cminstance,n=>{var r;n&&(y(O.cminstance),(r=O.cminstance)==null||r.setValue(O.value),_("ready",T))},{deep:!0,immediate:!0}),me(()=>{e()}),{initialize:e,textarea:b}}}),At=["name","placeholder"];function Ct(O,_,b,T,y,e){return le(),ge("textarea",{ref:"textarea",name:O.$props.name,placeholder:O.$props.placeholder},null,8,At)}const Ft=De(Tt,[["render",Ct]]),Je={"update:value":()=>!0,change:(O,_)=>({value:O,cm:_}),input:()=>!0,ready:O=>O},Mt=["changes","scroll","beforeChange","cursorActivity","keyHandled","inputRead","electricInput","beforeSelectionChange","viewportChange","swapDoc","gutterClick","gutterContextMenu","focus","blur","refresh","optionChange","scrollCursorIntoView","update"],Ot=()=>{const O={};return Mt.forEach(_=>{O[_]=(...b)=>b}),O},It={...Je,...Ot()},ye={mode:"text",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2,styleActiveLine:!0};function Lt(O){Promise.resolve().then(()=>{const _=O.getScrollInfo();O.scrollTo(_.left,_.height)})}const Bt=({props:O,cminstance:_,emit:b,internalInstance:T,content:y})=>{const e=Se(()=>{var r;return O.merge?(r=J(_))==null?void 0:r.editor():J(_)}),n=()=>{const r=[];return Object.keys(T==null?void 0:T.vnode.props).forEach(i=>{if(i.startsWith("on")){const a=i.replace(i[2],i[2].toLowerCase()).slice(2);!Je[a]&&r.push(a)}}),r};return{listenerEvents:()=>{e.value.on("change",i=>{const a=i.getValue();a===y.value&&a!==""||(y.value=a,b("update:value",y.value||""),b("input",y.value||" "),Promise.resolve().then(()=>{b("change",y.value,i)}),O.keepCursorInEnd&&Lt(i))});const r={};n().filter(i=>!r[i]&&(r[i]=!0)).forEach(i=>{e.value.on(i,(...a)=>{b(i,...a)})})}}};function Nt({props:O,cminstance:_,presetRef:b}){const T=q("100%"),y=q("100%"),e=Se(()=>{var s;return O.merge?(s=J(_))==null?void 0:s.editor():J(_)}),n=()=>{ft(()=>{var s;(s=e.value)==null||s.refresh()})},r=s=>s?!(s&&isNaN(+s)):!1,i=(s=O.width,g=O.height)=>{var h;let p="100%",c="100%";r(s)?p=`${String(s)}px`:s&&(p=s),r(g)?c=`${String(g)}px`:g&&(c=g),T.value=p,y.value=c,console.log("resize",p,c),(h=e.value)==null||h.setSize("100%","100%")},a=()=>{var s;const g=(s=e.value)==null?void 0:s.getWrapperElement();g==null||g.remove()},l=()=>{var s,g,h;const p=(s=e.value)==null?void 0:s.getDoc().getHistory();(g=b.value)==null||g.initialize(),a(),(h=e.value)==null||h.getDoc().setHistory(p)},f=()=>{const s=document.querySelector(".CodeMirror-gutters");return(s==null?void 0:s.style.left.replace("px",""))!=="0"};return{reload:l,refresh:n,resize:i,destroy:a,containerWidth:T,containerHeight:y,reviseStyle:()=>{if(n(),!f())return;const s=setInterval(()=>{f()?n():clearInterval(s)},60),g=setTimeout(()=>{clearInterval(s),clearTimeout(g)},400)}}}const je=ue({__name:"index",props:{value:{type:String,default:""},options:{type:Object,default:()=>ye},globalOptions:{type:Object,default:()=>ye},placeholder:{type:String,default:""},border:{type:Boolean,default:!1},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},originalStyle:{type:Boolean,default:!1},keepCursorInEnd:{type:Boolean,default:!1},merge:{type:Boolean,default:!1},name:{type:String,default:""},marker:{type:Function,default:()=>null},unseenLines:{type:Array,default:()=>[]}},emits:It,setup(O,{expose:_,emit:b}){var T,y,e;typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value(B){if(B==null)throw new TypeError("Cannot convert undefined or null to object");const P=Object(B);for(let z=1;z<arguments.length;z++){const G=arguments[z];if(G!=null)for(const ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(P[ee]=G[ee])}return P},writable:!0,configurable:!0});const n=O,r=b,i=q(null),a=q(""),l=rt(He),f=q({foldGutter:!0,...ye,...n.globalOptions,...n.options,gutters:[...new Set(["CodeMirror-linenumbers","CodeMirror-foldgutter",...((T=n.options)==null?void 0:T.gutters)||[]])]}),s=Ge(),g=n.name||((e=(y=s==null?void 0:s.parent)==null?void 0:y.type)==null?void 0:e.name)||void 0,h=q(null),p=Se(()=>{var B;return n.merge?(B=J(i))==null?void 0:B.editor():J(i)}),{refresh:c,resize:w,destroy:S,containerHeight:D,containerWidth:M,reviseStyle:L}=Nt({props:n,cminstance:i,presetRef:h}),{listenerEvents:N}=Bt({props:n,cminstance:i,emit:r,internalInstance:s,content:a}),F=()=>{n.unseenLines!==void 0&&n.marker!==void 0&&n.unseenLines.forEach(B=>{var P,z;const G=(P=i.value)==null?void 0:P.lineInfo(B);(z=i.value)==null||z.setGutterMarker(B,"breakpoints",G!=null&&G.gutterMarkers?null:n.marker())})},E=B=>{var P,z;const G=(P=i.value)==null?void 0:P.getValue();B!==G&&((z=i.value)==null||z.setValue(B),a.value=B,L()),F()},I=()=>{N(),F(),w(n.width,n.height),r("ready",i.value),ie([()=>n.width,()=>n.height],([B,P])=>{w(B,P)},{deep:!0})},R=()=>{if(n.options.mode==="fclog"||n.options.mode==="log"){l.value=Ft;return}if(n.merge){l.value=St;return}l.value=He};return ie(()=>n.options,B=>{var P;for(const z in n.options)(P=p.value)==null||P.setOption(z,J(B[z]))},{deep:!0}),ie(()=>n.value,B=>{E(B)}),ie(()=>n.merge,R,{immediate:!0}),it(()=>{S()}),_({cminstance:i,resize:w,refresh:c,destroy:S}),(B,P)=>(le(),ge("div",{class:We(["codemirror-container",{merge:B.$props.merge,bordered:B.$props.border||B.$props.merge&&!n.originalStyle,"original-style":n.originalStyle}]),style:st({height:J(D),width:J(M)})},[(le(),lt(ot(l.value),at({ref_key:"presetRef",ref:h,cminstance:i.value,"onUpdate:cminstance":P[0]||(P[0]=z=>i.value=z),style:{height:"100%"}},{...B.$props,...B.$attrs,options:f.value,name:J(g),content:a.value},{onReady:I}),null,16,["cminstance"]))],6))}});function Pt(O,_){_===void 0&&(_={});var b=_.insertAt;if(!(!O||typeof document>"u")){var T=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css",b==="top"&&T.firstChild?T.insertBefore(y,T.firstChild):T.appendChild(y),y.styleSheet?y.styleSheet.cssText=O:y.appendChild(document.createTextNode(O))}}Pt(`.codemirror-container {
  position: relative;
  display: inline-block;
  height: 100%;
  width: fit-content;
  font-size: 13px;
  overflow: hidden;
}
.codemirror-container.bordered {
  border: 1px solid #aaaaaa;
}

.codemirror-container .editor_custom_link {
  cursor: pointer;
  color: #1474f1;
  text-decoration: underline;
}
.codemirror-container .editor_custom_link:hover {
  color: #04b4fa;
}
.codemirror-container:not(.original-style) .CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {
  color: #666;
}
.codemirror-container:not(.original-style) .CodeMirror,
.codemirror-container:not(.original-style) .CodeMirror-merge-pane {
  height: 100%;
  font-family: consolas !important;
}
.codemirror-container:not(.original-style) .CodeMirror-merge,
.codemirror-container:not(.original-style) .CodeMirror-merge-right .CodeMirror {
  height: 100%;
  border: none !important;
}
.codemirror-container:not(.original-style) .c-editor--log__error {
  color: #bb0606;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__info {
  color: #333333;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__warning {
  color: #ee9900;
}
.codemirror-container:not(.original-style) .c-editor--log__success {
  color: #669600;
}
.codemirror-container:not(.original-style) .cm-header,
.codemirror-container:not(.original-style) .cm-strong {
  font-weight: bold;
}
`);const Rt={class:"container"},Vt={class:"left-panel"},Ut={class:"esQuery-container"},zt={style:{"min-height":"30px"}},Ht={class:"esQuery-label"},jt={class:"controls"},Wt={class:"right-panel"},Gt={class:"footer-button",justify:"end"},$t={class:"dialog-footer"},Qt=ue({__name:"search",setup(O){const{proxy:_}=Ge();let b="SELECT * from fast_test_new_v128 order by id desc limit 10",T=`{
    "query": {
        "bool": {
            "must": [
                {
                    "match_all": {}
                }
            ],
            "must_not": [],
            "should": []
        }
    },
    "from": 0,
    "size": 1,
    "sort": [],
    "aggs": {}
}`,y='Es.chainQuery().index("").search(10)',e=q(""),n=q("sql"),r=q("");q();const i=q("");me(()=>{a()});const a=()=>{const F=localStorage.getItem("lastSql");F?e.value=F:e.value=b,n.value="sql"},l=()=>{const F=localStorage.getItem("lastEpl");F?e.value=F:e.value=y,n.value="epl"},f=()=>{const F=localStorage.getItem("lastDsl");F?e.value=F:e.value=T,n.value="dsl"},s={theme:"default",mode:"application/json",lineNumbers:!0,matchBrackets:!0,lineWrapping:!0,styleActiveLine:!0,lint:!0},g={mode:"text/x-sql",theme:"default",line:!0,lineNumbers:!0,lineWrapping:!0,tabSize:4,hintOptions:{completeSingle:!1,tables:{BPSuv:["DocEntry","Subject","DocStatus","Remarks"],BPSuvA:["DocEntry","LineNum","Question","QstType"],BPSuvB:["DocEntry","LineNum","UserID","UserName"]}}},h=F=>{F.on("inputRead",function(E,I){/[a-zA-Z]/.test(I.text[0])&&E.showHint()})},p=()=>{n.value=="epl"&&w(e.value),n.value=="sql"&&S(e.value),n.value=="dsl"&&c(e.value)},c=async F=>{localStorage.setItem("lastDsl",F);const E={dsl:F,index:r.value};let I=await _.$api.tools.dslQuery(E);const R=JSON.stringify(I,null,2);i.value=R},w=async F=>{localStorage.setItem("lastEpl",F);const E={epl:F};let I=await _.$api.tools.eplQuery(E);const R=JSON.stringify(I,null,2);i.value=R},S=async F=>{localStorage.setItem("lastSql",F);const E={sql:F};let I=await _.$api.tools.sqlQuery(E);const R=JSON.stringify(I,null,2);i.value=R},D=()=>{if(i.value){const E=JSON.parse(i.value).hits.hits;if(E&&E.length>0){const I=E[0]._index,R=E.map(P=>P._id),B=E.map(P=>P._source);console.log(I+B),ze.confirm("\u786E\u5B9A\u7F16\u8F91"+R[0]+"...\u603B\u8BA1"+R.length+"\u4E2A\u6570\u636E?","\u7F16\u8F91\u786E\u8BA4",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",dangerouslyUseHTMLString:!0}).then(()=>{N(I,B)}).catch(()=>{})}}},M=()=>{if(i.value){const E=JSON.parse(i.value).hits.hits;if(E&&E.length>0){const I=E[0]._index,R=E.map(B=>B._id);console.log(I+R),ze.confirm("\u786E\u5B9A\u5220\u9664"+R[0]+"...\u603B\u8BA1"+R.length+"\u4E2A\u6570\u636E?","\u5220\u9664\u786E\u8BA4",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",dangerouslyUseHTMLString:!0}).then(()=>{console.log("\u786E\u8BA4\u5220\u9664"),L(I,R)}).catch(()=>{})}}},L=async(F,E)=>{const I={ids:E,index:F};let R=await _.$api.tools.deleteByIds(I);const B=JSON.stringify(R,null,2);i.value=B},N=async(F,E)=>{const I={index:F,datas:E};await _.$api.tools.updateBatch(I)};return(F,E)=>{const I=ut,R=gt,B=ht;return le(),ge("div",Rt,[x("div",Vt,[x("div",Ut,[Y(R,{style:{"margin-top":"-10px","margin-bottom":"10px"}},{default:ne(()=>[Y(I,{type:"primary",size:"small",onClick:a},{default:ne(()=>E[3]||(E[3]=[re("SQL")])),_:1}),Y(I,{type:"primary",size:"small",onClick:l},{default:ne(()=>E[4]||(E[4]=[re("EPL")])),_:1}),Y(I,{type:"primary",size:"small",onClick:f},{default:ne(()=>E[5]||(E[5]=[re("DSL")])),_:1})]),_:1}),x("div",zt,[Y(B,{class:We({hidden:J(n)!=="dsl"}),modelValue:J(r),"onUpdate:modelValue":E[0]||(E[0]=P=>Ue(r)?r.value=P:r=P),placeholder:"\u7D22\u5F15",style:{width:"100%","margin-bottom":"10px"}},null,8,["class","modelValue"])]),x("label",Ht,[Y(J(je),{value:J(e),"onUpdate:value":E[1]||(E[1]=P=>Ue(e)?e.value=P:e=P),options:g,ref:"sqlEditor",border:"",height:"630",width:"100%",onReady:h,class:"json-input",placeholder:"\u8BF7\u8F93\u5165Sql\u8BED\u53E5..."},null,8,["value"])]),x("div",jt,[Y(I,{size:"small",icon:J(ct),onClick:p},{default:ne(()=>E[6]||(E[6]=[re("\u641C\u7D22")])),_:1},8,["icon"])])])]),x("div",Wt,[Y(J(je),{value:i.value,"onUpdate:value":E[2]||(E[2]=P=>i.value=P),options:s,ref:"jsonEd",border:"",class:"json-output",height:"91%",style:{"margin-top":"30px"}},null,8,["value"]),x("div",Gt,[x("span",$t,[Y(I,{onClick:D,type:"danger",size:"small"},{default:ne(()=>E[7]||(E[7]=[re("\u4FEE\u6539")])),_:1}),Y(I,{type:"primary",onClick:M,size:"small"},{default:ne(()=>E[8]||(E[8]=[re("\u5220\u9664")])),_:1})])])])])}}});const Xt=dt(Qt,[["__scopeId","data-v-3663158c"]]);export{Xt as default};
