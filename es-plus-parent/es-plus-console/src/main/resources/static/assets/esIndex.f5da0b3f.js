/* empty css             *//* empty css                  *//* empty css                     *//* empty css                *//* empty css               */import"./javascript.97cfc26b.js";/* empty css               */import{d as $e,r as o,U as H,o as Ue,O as Te,b as Me,M as Ne,c as Se,$ as ze,X as Re,N as Oe,E as Je,a as Xe,V as Ye,W as je,e as g,h as I,P as s,g as a,w as u,n as i,F as R,i as O,a0 as G,a1 as P,u as J,a2 as f,K as Q,Q as Ke,R as b,j as Le,Z as He,f as Ge,Y as Pe,_ as Qe}from"./index.11045269.js";import{_ as X,e as Y}from"./message.556ec2b0.js";import{o as We}from"./global.4819befd.js";const Ze={class:"container"},qe={class:"searchInput"},el={class:"index-item"},ll={style:{"font-size":"28px","font-weight":"bold"}},al={class:"health-font",style:{"font-size":"18px"}},ul={class:"health-font"},tl={class:"index-size"},nl={class:"index-size"},ol={class:"index-size"},sl={class:"editClass"},il={style:{"margin-bottom":"10px"}},dl={class:"dataMoveClient-form"},pl={class:"dataMoveClient-form"},rl=$e({__name:"esIndex",setup(ml){const y=o(),c=o(1),k=o(!1),C=o(!1),T=o(!1),B=o(!1),M=o(!1),N=o("{}"),x=o(""),j=o([]),S=o(1e5),h=o(200),A=o("\u70B9\u51FB\u8FC1\u79FB"),W=[{prop:"id",label:"id"},{prop:"esClientName",label:"client\u540D\u5B57"},{prop:"sourceIndex",label:"\u6765\u6E90\u7D22\u5F15"},{prop:"targetIndex",label:"\u76EE\u6807\u7D22\u5F15"},{prop:"taskId",label:"\u4EFB\u52A1id"},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"},{prop:"createUid",label:"\u521B\u5EFA\u4EBAid"},{prop:"completed",label:"\u5B8C\u6210"},{prop:"taskJson",label:"\u4EFB\u52A1\u660E\u7EC6json"}],d=H({indexName:"",number_of_shards:5,number_of_replicas:1,max_result_window:1e4,refresh_interval:"1s",alias:""}),D=o(""),z=o(""),V=o(""),Z=async()=>{b.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{q(r.value),Y.success()}).catch(()=>{})},q=async t=>{const e={indexName:d.indexName,alias:d.alias,esSettings:{...d},mapping:JSON.parse(N.value)};let n=await v.$api.esIndex.createIndex(e);console.log(n),k.value=!1},ee=async()=>{b.confirm("\u4F60\u786E\u5B9A\u4FDD\u5B58\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{le(r.value,D.value),Y.success()}).catch(()=>{})},le=async(t,e)=>{const n={indexName:t,mappings:e};await v.$api.esIndex.putMapping(n),F.value=!1,$("")},ae=async()=>{c.value===3?oe():c.value===2?ne():c.value===1&&ue()},ue=async()=>{b.confirm("\u786E\u8BA4\u590D\u5236\u7D22\u5F15\u5230 "+y.value+"."+x.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{te()}).catch(()=>{})},te=async()=>{const t={targetClient:y.value,targetIndex:x.value,sourceIndex:r.value};await v.$api.esIndex.copyIndex(t),B.value=!1,x.value=""},ne=async()=>{b.confirm("\u786E\u8BA4\u8FC1\u79FB\u5230 "+x.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{ie()}).catch(()=>{})},oe=async()=>{b.confirm("\u786E\u8BA4\u8FC1\u79FB\u5230 "+y.value+"."+x.value+" \u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{se()}).catch(()=>{})},se=async()=>{const t={targetClient:y.value,maxSize:S.value,targetIndex:x.value,sourceIndex:r.value};await v.$api.esIndex.indexDataMove(t),B.value=!1,x.value=""},ie=async()=>{const t={targetIndex:x.value,sourceIndex:r.value};await v.$api.esIndex.reindex(t),B.value=!1,x.value=""},de=t=>{D.value=t},w=o("");H({id:null,unikey:"",name:"",address:"http://",username:"",password:"",schema:"http"});let F=o(!1),r=o("");const K=o([]),{proxy:v}=Le(),pe=async t=>{await Ee(t),F.value=!0,r.value=t},re=async t=>{_e(t),T.value=!0,r.value=t},me=async(t,e)=>{V.value=e,C.value=!0,r.value=t},ve=async(t,e)=>{M.value=!0;const n={sourceIndex:r.value};let m=await v.$api.esIndex.reindexTaskList(n);console.log(m),j.value=m},xe=async(t,e)=>{B.value=!0,r.value=t},ce=async()=>{fe(r.value,V.value)},fe=async(t,e)=>{const n={index:t,alias:e};await v.$api.esIndex.createAlias(n),C.value=!1},ye=async()=>{Be(r.value,V.value)},Be=async(t,e)=>{const n={index:t,alias:e};await v.$api.esIndex.removeAlias(n),C.value=!1},Fe=async()=>{k.value=!0},_e=async t=>{const e={index:t};let n=await v.$api.esIndex.getIndex(e);z.value=JSON.stringify(n,null,2)},Ee=async t=>{const e={indexName:t};let n=await v.$api.esIndex.getMapping(e);D.value=JSON.stringify(n,null,2)};Ue(()=>{$(w.value)});const ge=()=>{$(w.value)},$=async t=>{const e={keyword:t};let n=await v.$api.esIndex.getIndices(e);K.value=n},be=async t=>{b.confirm("\u4F60\u786E\u5B9A\u5220\u9664\u7D22\u5F15"+t+"\u5417? \u8C28\u614E\u64CD\u4F5C",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{Ce(t)}).catch(()=>{})},Ce=async t=>{const e={indexName:t};await v.$api.esIndex.deleteIndex(e),Y.success(),$(w.value)};return(t,e)=>{const n=Te,m=Me,p=Ne,L=Se,De=ze,_=Re,Ve=Oe,we=Je,Ie=Xe,ke=Pe,he=He,E=Ye,Ae=je;return g(),I("div",Ze,[s("div",qe,[a(L,null,{default:u(()=>[a(m,{span:22},{default:u(()=>[a(n,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),placeholder:"\u8BF7\u8F93\u5165\u7D22\u5F15\u540D\u79F0",style:{width:"300px"},onChange:ge},null,8,["modelValue"])]),_:1}),a(m,{span:2,style:{transform:"translateX(15px)"}},{default:u(()=>[a(p,{type:"primary",onClick:e[1]||(e[1]=l=>Fe()),plain:""},{default:u(()=>e[24]||(e[24]=[i("\u65B0\u5EFA\u7D22\u5F15")])),_:1})]),_:1})]),_:1})]),a(De,{height:"700px"},{default:u(()=>[(g(!0),I(R,null,O(K.value,l=>(g(),I("div",{key:l.index,class:"scrollbar-demo-item"},[s("div",el,[s("span",ll,f(l.index),1),e[25]||(e[25]=s("span",{class:"health-font"},"\u522B\u540D:",-1)),s("span",al,f(l.alias),1),e[26]||(e[26]=s("span",{class:"health-font"},"\u5065\u5EB7\u72B6\u6001:",-1)),s("span",{class:"health",style:Q({background:l.health})},null,4),s("span",ul,f(l.health),1)]),s("span",tl," size: "+f(l["store.size"]),1),s("span",nl," docs: "+f(l["docs.count"])+" delete_docs: "+f(l["docs.deleted"]),1),s("span",ol," shards: "+f(l.pri)+" replice: "+f(l.rep),1),s("div",sl,[a(p,{type:"primary",onClick:U=>pe(l.index),plain:""},{default:u(()=>e[27]||(e[27]=[i("\u8BBE\u7F6E\u6620\u5C04")])),_:2},1032,["onClick"]),a(p,{type:"primary",onClick:U=>re(l.index),plain:""},{default:u(()=>e[28]||(e[28]=[i("\u67E5\u770B\u7D22\u5F15\u4FE1\u606F")])),_:2},1032,["onClick"]),a(p,{type:"primary",onClick:U=>me(l.index,l.alias),plain:""},{default:u(()=>e[29]||(e[29]=[i("\u8BBE\u7F6E\u522B\u540D")])),_:2},1032,["onClick"]),a(p,{type:"primary",plain:"",onClick:U=>xe(l.index,l.alias)},{default:u(()=>e[30]||(e[30]=[i("\u8FC1\u79FB\u7D22\u5F15")])),_:2},1032,["onClick"]),a(p,{type:"danger",onClick:U=>be(l.index),plain:""},{default:u(()=>e[31]||(e[31]=[i("\u5220\u9664")])),_:2},1032,["onClick"])])]))),128))]),_:1}),a(_,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=l=>C.value=l),title:"\u8BBE\u7F6E\u522B\u540D",style:{width:"600px","max-width":"600px",position:"relative",height:"150px",transform:"translateX(50px)"}},{default:u(()=>[a(n,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l)},null,8,["modelValue"]),a(p,{type:"primary",plain:"",onClick:ce,style:{position:"absolute",right:"110px",bottom:"10px"}},{default:u(()=>e[32]||(e[32]=[i("\u8BBE\u7F6E\u522B\u540D ")])),_:1}),a(p,{type:"primary",plain:"",onClick:ye,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:u(()=>e[33]||(e[33]=[i("\u5220\u9664\u522B\u540D ")])),_:1})]),_:1},8,["modelValue"]),a(_,{modelValue:B.value,"onUpdate:modelValue":e[10]||(e[10]=l=>B.value=l),title:"\u5F53\u524D\u7D22\u5F15:"+J(r),style:Q({height:`${h.value}px`,width:"600px"})},{default:u(()=>[a(Ve,{style:{"margin-top":"-0px","margin-bottom":"11px"}},{default:u(()=>[a(p,{type:"primary",plain:"",onClick:e[4]||(e[4]=l=>(c.value=1,h.value=230,A.value="\u70B9\u51FB\u590D\u5236"))},{default:u(()=>e[34]||(e[34]=[i("\u7D22\u5F15\u590D\u5236")])),_:1}),a(p,{type:"primary",plain:"",onClick:e[5]||(e[5]=l=>(c.value=2,h.value=200,A.value="\u70B9\u51FB\u8FC1\u79FB"))},{default:u(()=>e[35]||(e[35]=[i("\u540C\u6E90\u8FC1\u79FB")])),_:1}),a(p,{type:"primary",plain:"",onClick:e[6]||(e[6]=l=>(c.value=3,h.value=300,A.value="\u70B9\u51FB\u8FC1\u79FB"))},{default:u(()=>e[36]||(e[36]=[i("\u8DE8\u6570\u636E\u6E90")])),_:1})]),_:1}),G(s("div",il,[s("div",dl,[e[37]||(e[37]=i(" \u76EE\u6807\u6570\u636E\u6E90: ")),a(Ie,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=l=>y.value=l),class:"m-2",placeholder:"Select",style:{width:"225px"},filterable:""},{default:u(()=>[(g(!0),I(R,null,O(J(We),l=>(g(),Ge(we,{key:l.id,label:`${l.unikey} (${l.name})`,value:l.unikey,valueKey:l.unikey},null,8,["label","value","valueKey"]))),128))]),_:1},8,["modelValue"])])],512),[[P,c.value==1||c.value==3]]),G(s("div",pl,[e[38]||(e[38]=i(" \u6700\u5927\u8FC1\u79FB\u6570\u91CF: ")),a(n,{placeholder:"\u672C\u6B21\u8FC1\u79FB\u6700\u5927\u9650\u5236\u6570\u91CF",modelValue:S.value,"onUpdate:modelValue":e[8]||(e[8]=l=>S.value=l),style:{display:"inline"}},null,8,["modelValue"])],512),[[P,c.value==3]]),a(n,{placeholder:"\u76EE\u6807\u7D22\u5F15",modelValue:x.value,"onUpdate:modelValue":e[9]||(e[9]=l=>x.value=l)},null,8,["modelValue"]),a(p,{type:"primary",plain:"",onClick:ae,style:{position:"absolute",right:"110px",bottom:"10px"}},{default:u(()=>[i(f(A.value),1)]),_:1}),a(p,{type:"primary",plain:"",onClick:ve,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:u(()=>e[39]||(e[39]=[i("\u4EFB\u52A1\u660E\u7EC6 ")])),_:1})]),_:1},8,["modelValue","title","style"]),a(_,{modelValue:M.value,"onUpdate:modelValue":e[11]||(e[11]=l=>M.value=l),title:"\u8FC1\u79FB\u4EFB\u52A1\u660E\u7EC6",style:{width:"1500px",position:"relative",height:"600px",transform:"translateX(50px)"}},{default:u(()=>[a(he,{data:j.value,style:{"max-width":"1500px","max-height":"1000px","min-height":"300px"},size:"large"},{default:u(()=>[(g(),I(R,null,O(W,l=>a(ke,{key:l.prop,label:l.label,prop:l.prop,width:"180"},null,8,["label","prop"])),64))]),_:1},8,["data"])]),_:1},8,["modelValue"]),a(_,{modelValue:k.value,"onUpdate:modelValue":e[19]||(e[19]=l=>k.value=l),title:"\u65B0\u5EFA\u7D22\u5F15",style:{width:"1200px","max-width":"1200px",position:"relative",height:"650px",transform:"translateY(-50px)"}},{default:u(()=>[a(L,null,{default:u(()=>[a(m,{span:8},{default:u(()=>[a(Ae,{inline:!0,model:d,ref:"clientForm","label-width":"100px",style:{"max-width":"660px"},"label-position":"top"},{default:u(()=>[a(E,{label:"\u7D22\u5F15\u540D",prop:"indexName",style:{width:"100%"}},{default:u(()=>[a(m,{span:24},{default:u(()=>[a(n,{modelValue:d.indexName,"onUpdate:modelValue":e[12]||(e[12]=l=>d.indexName=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(E,{label:"\u522B\u540D",prop:"alias",style:{width:"100%"}},{default:u(()=>[a(m,{span:24},{default:u(()=>[a(n,{modelValue:d.alias,"onUpdate:modelValue":e[13]||(e[13]=l=>d.alias=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(E,{label:"\u5206\u7247\u6570",prop:"number_of_shards",style:{width:"100%"}},{default:u(()=>[a(m,{span:24},{default:u(()=>[a(n,{modelValue:d.number_of_shards,"onUpdate:modelValue":e[14]||(e[14]=l=>d.number_of_shards=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(E,{label:"\u526F\u672C\u6570",prop:"number_of_replicas",style:{width:"100%"}},{default:u(()=>[a(m,{span:24},{default:u(()=>[a(n,{modelValue:d.number_of_replicas,"onUpdate:modelValue":e[15]||(e[15]=l=>d.number_of_replicas=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(E,{label:"\u6700\u5927\u67E5\u8BE2\u6570",prop:"max_result_window",style:{width:"100%"}},{default:u(()=>[a(m,{span:24},{default:u(()=>[a(n,{modelValue:d.max_result_window,"onUpdate:modelValue":e[16]||(e[16]=l=>d.max_result_window=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(E,{label:"\u5237\u65B0\u95F4\u9694\u79D2\u6570",prop:"refresh_interval",style:{width:"100%"}},{default:u(()=>[a(m,{span:24},{default:u(()=>[a(n,{modelValue:d.refresh_interval,"onUpdate:modelValue":e[17]||(e[17]=l=>d.refresh_interval=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(m,{span:16},{default:u(()=>[s("div",null,[a(X,{value:N.value,"onUpdate:value":e[18]||(e[18]=l=>N.value=l),height:"450",styles:"width: 50%",title:"\u8BBE\u7F6E\u6620\u5C04"},null,8,["value"])])]),_:1})]),_:1}),a(p,{type:"primary",plain:"",onClick:Z,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:u(()=>e[40]||(e[40]=[i(" \u786E\u8BA4\u65B0\u589E\u7D22\u5F15 ")])),_:1})]),_:1},8,["modelValue"]),a(_,{modelValue:J(F),"onUpdate:modelValue":e[21]||(e[21]=l=>Ke(F)?F.value=l:F=l),title:"\u8BBE\u7F6E\u6620\u5C04",style:{width:"1000px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:u(()=>[s("div",null,[a(X,{value:D.value,"onUpdate:value":[e[20]||(e[20]=l=>D.value=l),de],height:"600",styles:"width: 50%",title:"\u65B0\u589E\u6620\u5C04\u7ED3\u6784"},null,8,["value"])]),a(p,{type:"primary",plain:"",onClick:ee,style:{position:"absolute",right:"10px",bottom:"10px"}},{default:u(()=>e[41]||(e[41]=[i(" \u4FDD\u5B58/\u4FEE\u6539\u6620\u5C04 ")])),_:1})]),_:1},8,["modelValue"]),a(_,{modelValue:T.value,"onUpdate:modelValue":e[23]||(e[23]=l=>T.value=l),title:"\u7D22\u5F15\u4FE1\u606F",style:{width:"900px","max-width":"1000px",position:"relative",height:"750px",transform:"translateY(-50px)"}},{default:u(()=>[s("div",null,[a(X,{value:z.value,"onUpdate:value":e[22]||(e[22]=l=>z.value=l),height:"600",styles:"width: 100%",title:"\u7D22\u5F15\u4FE1\u606F"},null,8,["value"])])]),_:1},8,["modelValue"])])}}});const bl=Qe(rl,[["__scopeId","data-v-0fda9274"]]);export{bl as default};
